<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>整備記録 - ハイエース 1KDディーゼル 100万km走行を目指す | TrailFusion AI</title>
<meta name="description" content="ハイエース 1KDディーゼルエンジンの整備記録。100万km走行を目指すための整備費用一覧、DIY難易度、詳細手順を公開。">
<link rel="icon" type="image/jpeg" href="assets/images/b295aa9fa2c904bc29a0e5e438249d00.jpg">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S57KSMSB8Y"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-S57KSMSB8Y');
</script>

<!-- Tailwind CSS via CDN -->
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script>tailwind.config={theme:{extend:{colors:{primary:'#3b82f6',secondary:'#10b981',accent:'#f59e0b',danger:'#ef4444',purple:'#8b5cf6'}}}}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<style>
body { font-family: 'Noto Sans JP', sans-serif; }
.gradient-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
}
.card-gradient {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
}
.fuel-gradient { background: linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%); }
.intake-gradient { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
.engine-gradient { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
.drive-gradient { background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%); }
.electric-gradient { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }
.cooling-gradient { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); }
/* デフォルトで開いた状態 */
.item-content {
    display: block;
}
.bounce-in {
    animation: bounceIn 0.6s ease-out;
}
@keyframes bounceIn {
    0% { transform: scale(0.9); opacity: 0; }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); opacity: 1; }
}
.pulse-badge {
    animation: pulse 2s infinite;
}
@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}
.star { color: #fbbf24; }
.star-empty { color: #d1d5db; }
.floating {
    animation: floating 3s ease-in-out infinite;
}
@keyframes floating {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
.step-number {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: white;
    flex-shrink: 0;
}
/* PDF表示用 */
.pdf-container {
    width: 100%;
    min-height: 400px;
    border: none;
    background: #1f2937;
}
.pdf-wrapper {
    position: relative;
    background: #1f2937;
    border-radius: 0.75rem;
    overflow: hidden;
}
.pdf-canvas-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 8px;
    max-height: 600px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}
.pdf-canvas-container canvas {
    display: block;
    max-width: 100%;
    height: auto !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.pdf-toolbar {
    display: flex;
    justify-content: flex-end;
    gap: 0.5rem;
    padding: 0.5rem;
    background: linear-gradient(to right, #374151, #4b5563);
    border-bottom: 1px solid #6b7280;
}
.pdf-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.2s;
}
/* PDFローディングアニメーション */
.pdf-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 300px;
    color: white;
    gap: 16px;
}
.pdf-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid #374151;
    border-top-color: #3b82f6;
    border-radius: 50%;
    animation: pdfSpin 1s linear infinite;
}
@keyframes pdfSpin {
    to { transform: rotate(360deg); }
}
.pdf-loading-text {
    font-size: 14px;
    color: #9ca3af;
}
.pdf-progress-bar {
    width: 200px;
    height: 4px;
    background: #374151;
    border-radius: 2px;
    overflow: hidden;
}
.pdf-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    transition: width 0.3s ease;
}
.maintenance-item {
    scroll-margin-top: 100px;
}
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen">

<!-- Header -->
<header class="bg-white shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-4 py-4">
      <!-- スマホ・タブレット表示 -->
      <div class="flex items-center justify-between lg:hidden">
          <a href="index.html" class="flex items-center space-x-2 sm:space-x-3 hover:opacity-80 transition-opacity duration-300 flex-shrink-0">
              <img src="assets/images/b295aa9fa2c904bc29a0e5e438249d00.jpg" alt="TrailFusion AI ロゴ - キャンピングカーDIYとAIアプリケーション開発" class="h-8 sm:h-10 hover:scale-105 transition-transform duration-300">
              <div class="text-xs sm:text-sm font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">TrailFusion AI</div>
          </a>

          <!-- スマホでも表示するメインボタン -->
          <div class="flex items-center gap-1 sm:gap-2">
              <a href="camping.html" class="bg-blue-500 text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium hover:bg-blue-600 transition-colors duration-300 whitespace-nowrap">
                  <span class="sm:hidden">キャンピングカー</span>
                  <span class="hidden sm:inline">キャンピングカー製作</span>
              </a>
              <a href="apps.html" class="bg-green-500 text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium hover:bg-green-600 transition-colors duration-300 whitespace-nowrap">
                  <span class="sm:hidden">アプリ</span>
                  <span class="hidden sm:inline">アプリ紹介</span>
              </a>
              <a href="maintenance.html" class="bg-amber-600 text-white px-2 sm:px-3 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium hover:bg-amber-700 transition-colors duration-300 whitespace-nowrap hidden sm:inline-block">
                  整備記録
              </a>
              <button id="mobile-menu-toggle" class="w-9 h-9 sm:w-10 sm:h-10 flex items-center justify-center bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-300 ml-1">
                  <i class="ri-menu-line text-lg sm:text-xl"></i>
              </button>
          </div>
      </div>

      <!-- モバイルメニュー -->
      <nav id="mobile-menu" class="hidden lg:hidden mt-4 pb-4">
          <div class="flex flex-col space-y-3">
              <a href="index.html" class="bg-gray-500 text-white px-4 py-2.5 rounded-lg text-sm font-medium text-center hover:bg-gray-600 transition-colors duration-300">
                  ホーム
              </a>
              <a href="camping.html" class="bg-blue-500 text-white px-4 py-2.5 rounded-lg text-sm font-medium text-center hover:bg-blue-600 transition-colors duration-300">
                  キャンピングカー製作
              </a>
              <a href="apps.html" class="bg-green-500 text-white px-4 py-2.5 rounded-lg text-sm font-medium text-center hover:bg-green-600 transition-colors duration-300">
                  アプリ紹介
              </a>
              <a href="maintenance.html" class="bg-amber-600 text-white px-4 py-2.5 rounded-lg text-sm font-medium text-center hover:bg-amber-700 transition-colors duration-300">
                  整備記録
              </a>
              <a href="#pdf-library" class="bg-gradient-to-r from-orange-400 to-pink-500 text-white px-4 py-2.5 rounded-lg text-sm font-medium text-center hover:shadow-lg transition-colors duration-300">
                  PDF資料
              </a>
          </div>
      </nav>

      <!-- デスクトップ表示 -->
      <div class="hidden lg:flex items-center justify-between">
          <a href="index.html" class="flex items-center space-x-2 xl:space-x-3 hover:opacity-80 transition-opacity duration-300 flex-shrink-0">
              <img src="assets/images/b295aa9fa2c904bc29a0e5e438249d00.jpg" alt="TrailFusion AI ロゴ - キャンピングカーDIYとAIアプリケーション開発" class="h-8 xl:h-10 hover:scale-105 transition-transform duration-300">
              <div class="text-base xl:text-lg font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">TrailFusion AI</div>
          </a>

          <nav class="flex items-center space-x-1 xl:space-x-2">
              <a href="index.html" class="relative overflow-hidden bg-gray-500 text-white px-3 xl:px-4 py-2 xl:py-2.5 rounded-lg text-sm xl:text-base whitespace-nowrap group hover:shadow-lg transition-all duration-300 ease-in-out">
                  <span class="relative z-10">ホーム</span>
                  <div class="absolute inset-0 bg-gray-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
              </a>
              <a href="camping.html" class="relative overflow-hidden bg-blue-500 text-white px-3 xl:px-4 py-2 xl:py-2.5 rounded-lg text-sm xl:text-base whitespace-nowrap group hover:shadow-lg transition-all duration-300 ease-in-out">
                  <span class="relative z-10">キャンピングカー</span>
                  <div class="absolute inset-0 bg-blue-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
              </a>
              <a href="apps.html" class="relative overflow-hidden bg-green-500 text-white px-3 xl:px-4 py-2 xl:py-2.5 rounded-lg text-sm xl:text-base whitespace-nowrap group hover:shadow-lg transition-all duration-300 ease-in-out">
                  <span class="relative z-10">アプリ紹介</span>
                  <div class="absolute inset-0 bg-green-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
              </a>
              <a href="maintenance.html" class="relative overflow-hidden bg-amber-600 text-white px-3 xl:px-4 py-2 xl:py-2.5 rounded-lg text-sm xl:text-base whitespace-nowrap group hover:shadow-lg transition-all duration-300 ease-in-out">
                  <span class="relative z-10">整備記録</span>
                  <div class="absolute inset-0 bg-amber-700 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
              </a>

              <!-- SNS（大画面のみ表示） -->
              <div class="hidden xl:flex items-center space-x-1 ml-2">
                  <a href="https://www.youtube.com/@van_oasis" target="_blank" class="flex items-center justify-center w-8 h-8 xl:w-10 xl:h-10 bg-red-500 text-white rounded-full hover:bg-red-600 transform hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-red-500/50">
                      <i class="ri-youtube-fill text-sm xl:ri-xl"></i>
                  </a>
                  <a href="https://www.tiktok.com/@trailfusionai" target="_blank" class="flex items-center justify-center w-8 h-8 xl:w-10 xl:h-10 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-full hover:from-pink-600 hover:to-purple-600 transform hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-pink-500/50">
                      <i class="ri-tiktok-fill text-sm xl:ri-xl"></i>
                  </a>
                  <a href="https://x.com/trailfusionai" target="_blank" class="flex items-center justify-center w-8 h-8 xl:w-10 xl:h-10 bg-black text-white rounded-full hover:bg-gray-800 transform hover:scale-110 transition-all duration-300 shadow-lg hover:shadow-black/50">
                      <i class="ri-twitter-x-fill text-sm xl:ri-xl"></i>
                  </a>
              </div>

              <a href="#pdf-library" class="relative overflow-hidden bg-gradient-to-r from-orange-400 to-pink-500 text-white px-3 xl:px-4 py-2 xl:py-2.5 rounded-lg text-sm xl:text-base whitespace-nowrap group hover:shadow-lg transition-all duration-300 ease-in-out">
                  <span class="relative z-10"><i class="ri-file-pdf-2-line mr-1"></i>PDF資料</span>
              </a>
          </nav>
      </div>
  </div>
</header>

<!-- Hero Section -->
<section class="gradient-hero py-16 md:py-24 relative overflow-hidden">
    <div class="absolute inset-0 opacity-20">
        <div class="absolute top-10 left-10 w-20 h-20 bg-white rounded-full floating"></div>
        <div class="absolute top-32 right-20 w-16 h-16 bg-yellow-300 rounded-full floating" style="animation-delay: 0.5s"></div>
        <div class="absolute bottom-20 left-1/4 w-24 h-24 bg-pink-300 rounded-full floating" style="animation-delay: 1s"></div>
    </div>

    <div class="container mx-auto px-6 relative z-10 text-center">
        <div class="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm text-white px-6 py-2 rounded-full mb-6 pulse-badge">
            <i class="ri-roadster-fill text-xl"></i>
            <span class="font-medium">HIACE 1KD DIESEL</span>
        </div>

        <h1 class="text-4xl md:text-6xl lg:text-7xl font-black text-white mb-6 leading-tight">
            目指せ！<br>
            <span class="text-yellow-300 drop-shadow-lg">1,000,000 km</span>
        </h1>

        <p class="text-white/90 text-lg md:text-xl mb-8 max-w-2xl mx-auto">
            愛車ハイエースをもっと深く理解するための整備記録データベース。<br>
            ディーゼルエンジン特有の癖を知り、100万km走行を実現しよう！
        </p>

        <div class="flex flex-wrap justify-center gap-4">
            <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-4 text-white">
                <div class="text-3xl font-bold">13</div>
                <div class="text-sm opacity-80">整備項目</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-4 text-white">
                <div class="text-3xl font-bold">15</div>
                <div class="text-sm opacity-80">PDF資料</div>
            </div>
            <div class="bg-white/20 backdrop-blur-sm rounded-2xl px-6 py-4 text-white">
                <div class="text-3xl font-bold text-yellow-300">¥50万+</div>
                <div class="text-sm opacity-80">DIY節約可能額</div>
            </div>
        </div>
    </div>
</section>

<!-- エラーコード一覧（トップ表示） -->
<section id="error-codes" class="py-12 px-4 bg-gradient-to-b from-gray-100 to-white">
    <div class="container mx-auto max-w-7xl">
        <div class="text-center mb-8">
            <span class="inline-block bg-gradient-to-r from-red-500 to-orange-500 text-white text-sm font-medium px-4 py-2 rounded-full mb-4 shadow-lg">
                <i class="ri-error-warning-line mr-1"></i>DIAGNOSTIC CODES
            </span>
            <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-2">ハイエース 1KDエンジン エラーコード一覧</h2>
            <p class="text-gray-600">警告灯が点灯した際に「どの部品が怪しいか」の当たりをつけるための予備知識</p>
        </div>

        <div class="overflow-x-auto rounded-2xl shadow-xl border border-gray-200 bg-white">
            <table class="w-full text-xs md:text-sm">
                <thead>
                    <tr class="bg-gradient-to-r from-gray-800 to-gray-700 text-white">
                        <th class="px-3 py-3 text-left font-bold whitespace-nowrap">部品名</th>
                        <th class="px-3 py-3 text-left font-bold whitespace-nowrap">エラーコード</th>
                        <th class="px-3 py-3 text-left font-bold whitespace-nowrap hidden md:table-cell">エラー名称</th>
                        <th class="px-3 py-3 text-center font-bold whitespace-nowrap hidden md:table-cell">難易度</th>
                        <th class="px-3 py-3 text-center font-bold whitespace-nowrap hidden md:table-cell">作業時間</th>
                        <th class="px-3 py-3 text-center font-bold whitespace-nowrap">DIY<br><span class="text-xs font-normal">(部品代)</span></th>
                        <th class="px-3 py-3 text-center font-bold whitespace-nowrap">プロ依頼<br><span class="text-xs font-normal">(部品+工賃)</span></th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    <tr class="bg-red-50 hover:bg-red-100 transition-colors cursor-pointer" onclick="location.href='#item-injector'">
                        <td class="px-3 py-3 font-bold text-red-700 whitespace-nowrap">
                            <a href="#item-injector" class="hover:underline"><i class="ri-drop-fill mr-1"></i>インジェクター</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-red-100 text-red-800 px-2 py-0.5 rounded text-xs font-mono">P0201〜P0204</span>
                                <span class="inline-block bg-red-100 text-red-800 px-2 py-0.5 rounded text-xs font-mono">P062F</span>
                            </div>
                            <div class="text-xs text-gray-500">燃料噴射異常。加速不良・白煙・エンスト</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Injector Circuit / EEPROM Error</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-500 text-white px-2 py-1 rounded text-xs">★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">3〜5h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">5〜10万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">15〜25万</td>
                    </tr>
                    <tr class="bg-orange-50 hover:bg-orange-100 transition-colors cursor-pointer" onclick="location.href='#item-scv'">
                        <td class="px-3 py-3 font-bold text-orange-700 whitespace-nowrap">
                            <a href="#item-scv" class="hover:underline"><i class="ri-settings-3-fill mr-1"></i>SCV</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs font-mono">P0627</span>
                                <span class="inline-block bg-orange-100 text-orange-800 px-2 py-0.5 rounded text-xs font-mono">P0628</span>
                            </div>
                            <div class="text-xs text-gray-500">燃料供給ポンプ異常。始動不良・出力低下</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Fuel Pump Control Circuit</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">1〜2h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">1〜2万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">3〜5万</td>
                    </tr>
                    <tr class="bg-yellow-50 hover:bg-yellow-100 transition-colors cursor-pointer" onclick="location.href='#item-turbo'">
                        <td class="px-3 py-3 font-bold text-yellow-700 whitespace-nowrap">
                            <a href="#item-turbo" class="hover:underline"><i class="ri-cloud-fill mr-1"></i>ターボ</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-mono">P0234</span>
                                <span class="inline-block bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded text-xs font-mono">P0299</span>
                            </div>
                            <div class="text-xs text-gray-500">過給圧異常。パワー不足・黒煙・加速不良</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Turbo Over/Underboost</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-600 text-white px-2 py-1 rounded text-xs">★★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">6〜10h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">10〜20万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">25〜45万</td>
                    </tr>
                    <tr class="bg-green-50 hover:bg-green-100 transition-colors cursor-pointer" onclick="location.href='#item-egr'">
                        <td class="px-3 py-3 font-bold text-green-700 whitespace-nowrap">
                            <a href="#item-egr" class="hover:underline"><i class="ri-refresh-fill mr-1"></i>EGR・インマニ</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-mono">P0400</span>
                                <span class="inline-block bg-green-100 text-green-800 px-2 py-0.5 rounded text-xs font-mono">P0405</span>
                            </div>
                            <div class="text-xs text-gray-500">排気再循環の詰まり。アイドル不安定・燃費悪化</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">EGR Flow Malfunction</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">3〜5h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">2〜4万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">5〜10万</td>
                    </tr>
                    <tr class="bg-teal-50 hover:bg-teal-100 transition-colors cursor-pointer" onclick="location.href='#item-dpr-clean'">
                        <td class="px-3 py-3 font-bold text-teal-700 whitespace-nowrap">
                            <a href="#item-dpr-clean" class="hover:underline"><i class="ri-filter-fill mr-1"></i>DPR洗浄</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-teal-100 text-teal-800 px-2 py-0.5 rounded text-xs font-mono">P2002</span>
                                <span class="inline-block bg-teal-100 text-teal-800 px-2 py-0.5 rounded text-xs font-mono">P2463</span>
                            </div>
                            <div class="text-xs text-gray-500">PM堆積過多。再生頻発・出力制限モード</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">DPF Soot Accumulation</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-green-500 text-white px-2 py-1 rounded text-xs">★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">2〜4h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">0.5〜1万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">3〜6万</td>
                    </tr>
                    <tr class="bg-cyan-50 hover:bg-cyan-100 transition-colors cursor-pointer" onclick="location.href='#item-dpr-replace'">
                        <td class="px-3 py-3 font-bold text-cyan-700 whitespace-nowrap">
                            <a href="#item-dpr-replace" class="hover:underline"><i class="ri-filter-off-fill mr-1"></i>DPR交換</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-cyan-100 text-cyan-800 px-2 py-0.5 rounded text-xs font-mono">P1420</span>
                                <span class="inline-block bg-cyan-100 text-cyan-800 px-2 py-0.5 rounded text-xs font-mono">P200C</span>
                            </div>
                            <div class="text-xs text-gray-500">DPF過熱・溶損。排気漏れ・走行不能</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">DPF Over Temperature</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-500 text-white px-2 py-1 rounded text-xs">★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">3〜5h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">8〜15万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">18〜30万</td>
                    </tr>
                    <tr class="bg-blue-50 hover:bg-blue-100 transition-colors cursor-pointer" onclick="location.href='#item-timing'">
                        <td class="px-3 py-3 font-bold text-blue-700 whitespace-nowrap">
                            <a href="#item-timing" class="hover:underline"><i class="ri-timer-fill mr-1"></i>タイミングベルト</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-mono">T-BELT警告灯</span>
                                <span class="inline-block bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs font-mono">P0340</span>
                            </div>
                            <div class="text-xs text-gray-500">ベルト劣化・伸び。切れるとエンジン破損</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Camshaft Position Sensor</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-600 text-white px-2 py-1 rounded text-xs">★★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">5〜8h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">1〜2万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">6〜12万</td>
                    </tr>
                    <tr class="bg-indigo-50 hover:bg-indigo-100 transition-colors cursor-pointer" onclick="location.href='#item-hub'">
                        <td class="px-3 py-3 font-bold text-indigo-700 whitespace-nowrap">
                            <a href="#item-hub" class="hover:underline"><i class="ri-circle-fill mr-1"></i>ハブベアリング</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs font-mono">C1203</span>
                                <span class="inline-block bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs font-mono">C1336</span>
                            </div>
                            <div class="text-xs text-gray-500">ベアリング摩耗。走行時ゴロゴロ異音・ABS警告</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">ABS Sensor Signal</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">2〜4h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">0.5〜1万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">3〜6万</td>
                    </tr>
                    <tr class="bg-purple-50 hover:bg-purple-100 transition-colors cursor-pointer" onclick="location.href='#item-at'">
                        <td class="px-3 py-3 font-bold text-purple-700 whitespace-nowrap">
                            <a href="#item-at" class="hover:underline"><i class="ri-steering-fill mr-1"></i>ATミッション</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-mono">P0700系</span>
                                <span class="inline-block bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs font-mono">P2714</span>
                            </div>
                            <div class="text-xs text-gray-500">変速異常。滑り・ショック・走行不能</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Transmission Control</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-600 text-white px-2 py-1 rounded text-xs">★★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">1〜2日</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">15〜40万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">35〜70万</td>
                    </tr>
                    <tr class="bg-pink-50 hover:bg-pink-100 transition-colors cursor-pointer" onclick="location.href='#item-alternator'">
                        <td class="px-3 py-3 font-bold text-pink-700 whitespace-nowrap">
                            <a href="#item-alternator" class="hover:underline"><i class="ri-flashlight-fill mr-1"></i>オルタネーター</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-pink-100 text-pink-800 px-2 py-0.5 rounded text-xs font-mono">P0560</span>
                                <span class="inline-block bg-pink-100 text-pink-800 px-2 py-0.5 rounded text-xs font-mono">P2503</span>
                            </div>
                            <div class="text-xs text-gray-500">充電系統異常。バッテリー上がり・電圧低下</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">System Voltage Low</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">1〜2h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">2〜4万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">5〜10万</td>
                    </tr>
                    <tr class="bg-rose-50 hover:bg-rose-100 transition-colors cursor-pointer" onclick="location.href='#item-ac'">
                        <td class="px-3 py-3 font-bold text-rose-700 whitespace-nowrap">
                            <a href="#item-ac" class="hover:underline"><i class="ri-temp-cold-fill mr-1"></i>A/Cコンプレッサー</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-rose-100 text-rose-800 px-2 py-0.5 rounded text-xs font-mono">B1422</span>
                                <span class="inline-block bg-rose-100 text-rose-800 px-2 py-0.5 rounded text-xs font-mono">A/Cランプ点滅</span>
                            </div>
                            <div class="text-xs text-gray-500">コンプレッサーロック。エアコン効かない</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Compressor Lock</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-red-500 text-white px-2 py-1 rounded text-xs">★★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">3〜5h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">4〜8万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-red-600">12〜20万</td>
                    </tr>
                    <tr class="bg-amber-50 hover:bg-amber-100 transition-colors cursor-pointer" onclick="location.href='#item-radiator'">
                        <td class="px-3 py-3 font-bold text-amber-700 whitespace-nowrap">
                            <a href="#item-radiator" class="hover:underline"><i class="ri-water-flash-fill mr-1"></i>ラジエーター</a>
                        </td>
                        <td class="px-3 py-3">
                            <div class="flex flex-wrap gap-1 mb-1">
                                <span class="inline-block bg-amber-100 text-amber-800 px-2 py-0.5 rounded text-xs font-mono">P0117</span>
                                <span class="inline-block bg-amber-100 text-amber-800 px-2 py-0.5 rounded text-xs font-mono">水温警告灯</span>
                            </div>
                            <div class="text-xs text-gray-500">冷却水異常。オーバーヒート・水漏れ</div>
                        </td>
                        <td class="px-3 py-3 text-gray-600 hidden md:table-cell">Coolant Temp Low/High</td>
                        <td class="px-3 py-3 text-center hidden md:table-cell"><span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">★★★</span></td>
                        <td class="px-3 py-3 text-center whitespace-nowrap hidden md:table-cell">2〜4h</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-green-600">2〜4万</td>
                        <td class="px-3 py-3 text-center whitespace-nowrap font-bold text-orange-600">5〜12万</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p class="text-gray-500 text-sm mt-4 text-center">
            <i class="ri-information-line mr-1"></i>
            部品名をクリックすると詳細にジャンプ | 工賃は業者依頼時の目安（DIYなら部品代のみ）
        </p>
    </div>
</section>

<!-- 整備全項目まとめPDF -->
<section id="overview-pdf" class="py-8 px-4 bg-gradient-to-b from-blue-50 to-white">
    <div class="container mx-auto max-w-5xl">
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden border-2 border-blue-300">
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <i class="ri-file-pdf-2-fill text-white text-2xl"></i>
                    <div>
                        <h2 class="text-white font-bold text-xl">整備全項目まとめ</h2>
                        <p class="text-white/80 text-sm">ハイエース1KDディーゼル整備の全体像</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <a href="document/ハイエース整備全項目まとめ.pdf" target="_blank" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">
                        <i class="ri-fullscreen-line"></i>拡大表示
                    </a>
                    <a href="document/ハイエース整備全項目まとめ.pdf" download class="bg-white hover:bg-gray-100 text-blue-600 px-4 py-2 rounded-lg text-sm font-medium transition flex items-center gap-2">
                        <i class="ri-download-line"></i>ダウンロード
                    </a>
                </div>
            </div>
            <div class="pdf-canvas-container" id="pdf-main" data-pdf="document/ハイエース整備全項目まとめ.pdf" style="min-height: 500px;">
                <div class="pdf-loading">
                    <div class="pdf-spinner"></div>
                    <div class="pdf-loading-text">PDFを読み込んでいます...</div>
                    <div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Maintenance Categories -->
<section id="maintenance-list" class="py-16 px-4">
    <div class="container mx-auto max-w-7xl">
        <div class="text-center mb-8">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">
                <i class="ri-tools-fill text-blue-500 mr-2"></i>整備項目一覧
            </h2>
            <p class="text-gray-600 mb-6">項目をクリックするとその場所にジャンプします</p>

            <!-- 13項目ナビゲーションボタン -->
            <div class="flex flex-wrap justify-center gap-2 max-w-4xl mx-auto">
                <a href="#item-injector" class="bg-gradient-to-r from-red-500 to-orange-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">インジェクター</a>
                <a href="#item-scv" class="bg-gradient-to-r from-orange-500 to-yellow-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">SCV</a>
                <a href="#item-turbo" class="bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">ターボ</a>
                <a href="#item-egr" class="bg-gradient-to-r from-cyan-500 to-teal-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">EGR・インマニ</a>
                <a href="#item-dpr-clean" class="bg-gradient-to-r from-teal-500 to-green-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">DPR洗浄</a>
                <a href="#item-exhaust-valve" class="bg-gradient-to-r from-green-500 to-lime-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">排気絞り弁</a>
                <a href="#item-dpr-replace" class="bg-gradient-to-r from-lime-500 to-emerald-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">DPR交換</a>
                <a href="#item-timing" class="bg-gradient-to-r from-emerald-500 to-lime-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">タイミングベルト</a>
                <a href="#item-hub" class="bg-gradient-to-r from-violet-600 to-purple-600 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">ハブベアリング</a>
                <a href="#item-hub-stuck" class="bg-gradient-to-r from-pink-500 to-rose-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">ハブ固着</a>
                <a href="#item-at" class="bg-gradient-to-r from-rose-500 to-red-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">ATミッション</a>
                <a href="#item-alternator" class="bg-gradient-to-r from-amber-500 to-yellow-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">オルタネーター</a>
                <a href="#item-ac" class="bg-gradient-to-r from-sky-500 to-blue-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">エアコン</a>
                <a href="#item-radiator" class="bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-3 py-2 rounded-full text-xs font-medium hover:shadow-lg transition hover:scale-105">ラジエーター</a>
            </div>
        </div>

        <!-- 燃料系 -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="fuel-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-gas-station-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">燃料系</h3>
                    <p class="text-gray-500 text-sm">Fuel System</p>
                </div>
            </div>

            <!-- インジェクター交換 -->
            <div id="item-injector" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-red-500 to-orange-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-drop-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">インジェクター交換（4本・リビルト）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥231,000</span>
                                <span class="text-sm opacity-90">難易度: ★★★★★</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-red-500"></i>どんな故障？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                燃料を霧状に噴射する装置を4本すべて交換。走行距離10万〜15万キロ超で、<strong class="text-red-600">排ガスが臭くなったり、エンジン音がガラガラ（ノッキング）なったり</strong>した場合に実施。
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-tools-line mr-1"></i>必要な部品</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・リビルトインジェクター4本</li>
                                    <li>・ヘッドカバーガスケット</li>
                                    <li>・ノズルホルダーシール</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-hammer-line mr-1"></i>必要な工具</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・トルクレンチ</li>
                                    <li>・SST</li>
                                    <li>・<strong class="text-red-600">診断機（必須）</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-xl">
                            <p class="text-gray-700 text-xs">
                                <strong>重要:</strong> インジェクターのIDコードをECUに登録必須。診断機（Toyota Techstream等）が絶対に必要。
                            </p>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-600">約10万円</div>
                                <div class="text-xs text-gray-600">DIY節約額</div>
                            </div>
                            <div class="flex-1 text-xs text-gray-700">
                                リスク高。プロに任せるのが賢明。
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/ハイエースインジェクター交換_プロとDIYの境界線.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/ハイエースインジェクター交換_プロとDIYの境界線.pdf" download class="pdf-btn bg-red-500 text-white hover:bg-red-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/ハイエースインジェクター交換_プロとDIYの境界線.pdf">
                            <div class="pdf-loading">
                                <div class="pdf-spinner"></div>
                                <div class="pdf-loading-text">PDFを読み込んでいます...</div>
                                <div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SCV交換 -->
            <div id="item-scv" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-orange-500 to-yellow-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-settings-3-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">サクションコントロールバルブ（SCV）交換</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥22,700</span>
                                <span class="text-sm opacity-90">難易度: ★★☆☆☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-orange-500"></i>どんな故障？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                信号待ちで「ブルルン」とエンジン回転数が勝手に上下する（ハンチング）場合や、エンストしそうになる場合。<strong class="text-orange-600">ハイエースディーゼルの定番トラブル</strong>。
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-tools-line mr-1"></i>必要な部品</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・SCV本体キット</li>
                                    <li>・パーツクリーナー</li>
                                    <li>・ウエス</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-hammer-line mr-1"></i>必要な工具</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・六角レンチ5mm</li>
                                    <li>・10mm/12mmソケット</li>
                                    <li>・OBD2診断機</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <h6 class="font-bold text-gray-800 text-sm mb-2"><i class="ri-list-ordered mr-1"></i>作業手順</h6>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="flex gap-2 items-center"><span class="step-number bg-orange-500 w-6 h-6 text-xs">1</span>エンジンルーム開ける</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-orange-500 w-6 h-6 text-xs">2</span>周辺を洗浄</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-orange-500 w-6 h-6 text-xs">3</span>ボルト2本外す</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-orange-500 w-6 h-6 text-xs">4</span>診断機で学習リセット</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-600">約5,000円</div>
                                <div class="text-xs text-gray-600">DIY節約額</div>
                            </div>
                            <div class="flex-1 text-xs text-gray-700">
                                初心者でも挑戦しやすい！
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/サクションコントロールバルブ交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/サクションコントロールバルブ交換.pdf" download class="pdf-btn bg-orange-500 text-white hover:bg-orange-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/サクションコントロールバルブ交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 吸排気系 -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="intake-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-windy-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">吸排気系</h3>
                    <p class="text-gray-500 text-sm">Intake & Exhaust</p>
                </div>
            </div>

            <!-- ターボチャージャー交換 -->
            <div id="item-turbo" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-blue-500 to-cyan-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-typhoon-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">ターボチャージャー交換（リビルト）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥196,300</span>
                                <span class="text-sm opacity-90">難易度: ★★★★★</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-blue-500"></i>どんな故障？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                エンジンの排気ガスで「風車」を回し、パワーを出す部品。<strong class="text-blue-600">「キーン」「ヒュイーン」という異音、加速不良、白煙</strong>が故障サイン。
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-tools-line mr-1"></i>必要な部品</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・リビルトターボ（約5〜8万円）</li>
                                    <li>・ガスケットキット</li>
                                    <li>・銅ワッシャー</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-hammer-line mr-1"></i>必要な工具</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・ソケットレンチセット</li>
                                    <li>・エクステンションバー</li>
                                    <li>・<strong class="text-red-600">浸透潤滑剤（大量！）</strong></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl">
                            <p class="text-gray-700 text-xs">
                                <strong>最大の難関:</strong> 排気管のボルトが錆で一体化。折ると走行不能でレッカー必須。初期潤滑を忘れると新品が即座に焼き付きます！
                            </p>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-600">約10万円</div>
                                <div class="text-xs text-gray-600">DIY節約額</div>
                            </div>
                            <div class="flex-1 text-xs text-gray-700">
                                錆びたボルトとの戦い。覚悟が必要！
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/高額修理の謎_ハイエースターボ交換完全ガイド.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/高額修理の謎_ハイエースターボ交換完全ガイド.pdf" download class="pdf-btn bg-blue-500 text-white hover:bg-blue-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/高額修理の謎_ハイエースターボ交換完全ガイド.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- EGR・インマニ洗浄 -->
            <div id="item-egr" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-teal-500 to-cyan-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-bubble-chart-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">EGR・インテークマニホールド洗浄</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥99,200</span>
                                <span class="text-sm opacity-90">難易度: ★★★★☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-teal-500"></i>エンジンの動脈硬化を治す！
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                ディーゼル特有の「煤」が配管に<strong class="text-teal-600">ヘドロのように溜まる</strong>。加速が鈍い、燃費悪化、黒煙が出る場合に必要。
                            </p>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-xl">
                            <p class="text-gray-700 text-xs">
                                <strong>約10万円の価値:</strong> 作業の大半は「泥臭い洗浄」と「部品脱着」。整備士が真っ黒になって一日作業する手間賃です。
                            </p>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div>
                            <h6 class="font-bold text-gray-800 text-sm mb-2"><i class="ri-list-ordered mr-1"></i>作業手順</h6>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="flex gap-2 items-center"><span class="step-number bg-teal-500 w-6 h-6 text-xs">1</span>各部品を取り外し</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-teal-500 w-6 h-6 text-xs">2</span>煤を掻き出す</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-teal-500 w-6 h-6 text-xs">3</span>灯油浸け置き＋洗浄</div>
                                <div class="flex gap-2 items-center"><span class="step-number bg-red-500 w-6 h-6 text-xs">!</span>煤を落とさない</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-600">約9万円</div>
                                <div class="text-xs text-gray-600">DIY節約額</div>
                            </div>
                            <div class="flex-1 text-xs text-gray-700">
                                終わった後の加速感は感動モノ！
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/EGR・インテークマニフォールドの洗浄.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/EGR・インテークマニフォールドの洗浄.pdf" download class="pdf-btn bg-teal-500 text-white hover:bg-teal-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/EGR・インテークマニフォールドの洗浄.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- DPR洗浄 -->
            <div id="item-dpr-clean" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-cyan-500 to-blue-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-filter-3-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">DPR洗浄（施工のみ）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥26,400〜¥55,000</span>
                                <span class="text-sm opacity-90">難易度: ★★★☆☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-cyan-500"></i>DPRとは？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                排気ガスの煤を捕集するフィルター。<strong class="text-cyan-600">「DPRランプ」点滅・点灯、警告音、出力制限</strong>が詰まりのサイン。洗浄は交換前の延命措置。
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1">ケミカル注入洗浄</h6>
                                <p class="text-gray-700 text-xs">約2〜3万円。マフラー付けたまま洗浄剤注入。</p>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1">マフラー脱着洗浄</h6>
                                <p class="text-gray-700 text-xs">約4〜6万円。取り外してドブ漬け＋高圧洗浄。</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl mb-6">
                        <p class="text-gray-700 text-xs">
                            <strong>注意:</strong> アッシュ（オイル由来の燃えカス）は溶けません。洗浄してもすぐ詰まる場合はDPR交換が必要。
                        </p>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/DPF洗浄.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/DPF洗浄.pdf" download class="pdf-btn bg-cyan-500 text-white hover:bg-cyan-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/DPF洗浄.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- 排気絞り弁（P047F） -->
            <div id="item-exhaust-valve" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-green-500 to-lime-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-valve-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">排気絞り弁の清掃・交換（P047F）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">清掃: ¥0〜 / 交換: ¥40,000〜</span>
                                <span class="text-sm opacity-90">難易度: ★★★☆☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- 概要説明 -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-50 to-lime-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-green-500"></i>どんな部品？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                エンジンの暖機を早めたり、DPF再生時に排気温度を上げたりするために、マフラーの途中（フロントパイプ付近）にある「弁（バタフライバルブ）」です。電子制御でパタパタと開閉し、<strong class="text-green-600">排気の流れをわざと詰まらせてエンジン負荷を高める</strong>役割をします。
                            </p>
                        </div>
                        <div>
                            <div class="bg-red-100 border-l-4 border-red-500 p-4 rounded-r-xl mb-3">
                                <h6 class="font-bold text-red-800 text-sm mb-2"><i class="ri-error-warning-fill mr-1"></i>故障の症状（P047F）</h6>
                                <ul class="text-gray-700 text-xs space-y-1">
                                    <li><strong>チェックランプ点灯：</strong>P047Fのエラーコードが出る</li>
                                    <li><strong>DPF再生が終わらない：</strong>排気温度が上がらず再生モードが続く</li>
                                    <li><strong>出力低下：</strong>弁が中途半端に閉じたまま固着し走らない</li>
                                    <li><strong>異音：</strong>下回りから「キーキー」という作動音</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 原因と難易度 -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-xl">
                            <h6 class="font-bold text-yellow-800 text-sm mb-2"><i class="ri-lightbulb-fill mr-1"></i>原因</h6>
                            <p class="text-gray-700 text-xs">排気ガスに含まれる<strong class="text-yellow-600">大量のカーボン（煤）</strong>が弁の軸にこびりつき、動きが悪くなって固着。また、アクチュエーター（モーター）内部のギア欠けによる作動不良もあります。</p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-time-line mr-1"></i>作業時間</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・清掃：約1〜2時間</li>
                                    <li>・交換：約1時間</li>
                                    <li>（ボルトが素直に外れれば）</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-check-line mr-1"></i>DIY可能度</h6>
                                <p class="text-gray-700 text-xs">ジャッキアップさえできればDIYでも挑戦しやすい部類！</p>
                            </div>
                        </div>
                    </div>

                    <!-- 清掃方法（アコーディオン） -->
                    <div class="mb-4">
                        <button onclick="toggleAccordion(this)" class="w-full flex items-center justify-between bg-gradient-to-r from-green-100 to-lime-100 p-4 rounded-xl text-left hover:from-green-200 hover:to-lime-200 transition">
                            <span class="font-bold text-gray-800"><i class="ri-droplet-fill mr-2 text-blue-500"></i>① 清掃で直す方法（軽症の場合）</span>
                            <i class="ri-arrow-down-s-line text-xl accordion-icon transition-transform"></i>
                        </button>
                        <div class="accordion-content overflow-hidden max-h-0 transition-all duration-300">
                            <div class="p-4 bg-white border border-t-0 border-gray-200 rounded-b-xl">
                                <div class="mb-4">
                                    <h6 class="font-bold text-gray-800 text-sm mb-2"><i class="ri-tools-line mr-1"></i>必要なもの</h6>
                                    <div class="grid grid-cols-2 gap-2 text-xs">
                                        <div class="bg-gray-50 rounded-lg p-2">・潤滑剤（ラスペネなど）※必須</div>
                                        <div class="bg-gray-50 rounded-lg p-2">・エンジンコンディショナー（泡タイプ）</div>
                                        <div class="bg-gray-50 rounded-lg p-2">・ワイヤーブラシ・サンドペーパー</div>
                                        <div class="bg-gray-50 rounded-lg p-2">・10mm/12mmスパナ・レンチ</div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex gap-3">
                                        <span class="step-number bg-green-500 w-7 h-7 text-xs flex-shrink-0">1</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">ジャッキアップ</h6>
                                            <p class="text-gray-600 text-xs">安全に車の下に潜れるようにします。場所は運転席の下あたり、マフラーの途中にある「四角い箱（アクチュエーター）」がついた部分です。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-green-500 w-7 h-7 text-xs flex-shrink-0">2</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">リンクの切り離し</h6>
                                            <p class="text-gray-600 text-xs">アクチュエーター（モーター）と弁を繋いでいる「ロッド（棒）」のナットを外し、手で弁が動くか確認。ガチガチに固まって動かなければ、煤による固着が確定です。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-green-500 w-7 h-7 text-xs flex-shrink-0">3</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">洗浄剤の噴射</h6>
                                            <p class="text-gray-600 text-xs">弁の軸部分（外側から見える隙間）に、エンジンコンディショナーと潤滑剤を交互に吹き付けます。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-green-500 w-7 h-7 text-xs flex-shrink-0">4</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">リハビリ（重要！）</h6>
                                            <p class="text-gray-600 text-xs">プライヤーなどで弁の軸を掴み、<strong>「グリグリ」と強制的に動かします</strong>。最初は硬いですが、潤滑剤を吹いては動かし、を数十分繰り返すと、徐々に「パタンパタン」とスムーズに動くようになります。<br><span class="text-green-600 font-medium">ポイント：完全に抵抗なく、指一本で動くようになるまで根気よく続けます。</span></p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-green-500 w-7 h-7 text-xs flex-shrink-0">5</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">組み戻し</h6>
                                            <p class="text-gray-600 text-xs">ロッドを繋ぎ直し、エンジンをかけてエラーを消去します。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 交換方法（アコーディオン） -->
                    <div class="mb-6">
                        <button onclick="toggleAccordion(this)" class="w-full flex items-center justify-between bg-gradient-to-r from-orange-100 to-red-100 p-4 rounded-xl text-left hover:from-orange-200 hover:to-red-200 transition">
                            <span class="font-bold text-gray-800"><i class="ri-swap-box-fill mr-2 text-orange-500"></i>② 交換する方法（重症・ギア欠けの場合）</span>
                            <i class="ri-arrow-down-s-line text-xl accordion-icon transition-transform"></i>
                        </button>
                        <div class="accordion-content overflow-hidden max-h-0 transition-all duration-300">
                            <div class="p-4 bg-white border border-t-0 border-gray-200 rounded-b-xl">
                                <div class="mb-4">
                                    <h6 class="font-bold text-gray-800 text-sm mb-2"><i class="ri-tools-line mr-1"></i>必要な部品・ツール</h6>
                                    <div class="grid md:grid-cols-3 gap-2 text-xs">
                                        <div class="bg-blue-50 rounded-lg p-3">
                                            <strong class="text-blue-800">エキゾースト・コントロールバルブ Assy</strong>
                                            <p class="text-gray-600 mt-1">新品:4〜5万円 / 中古・リビルト:1.5〜3万円</p>
                                        </div>
                                        <div class="bg-blue-50 rounded-lg p-3">
                                            <strong class="text-blue-800">ガスケット（2枚）</strong>
                                            <p class="text-gray-600 mt-1">パイプの前後に挟むパッキン。再利用不可</p>
                                        </div>
                                        <div class="bg-blue-50 rounded-lg p-3">
                                            <strong class="text-blue-800">ボルト・ナットセット</strong>
                                            <p class="text-gray-600 mt-1">錆びて再利用できないことが多いのでM10新品を用意</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex gap-3">
                                        <span class="step-number bg-orange-500 w-7 h-7 text-xs flex-shrink-0">1</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">カプラー取り外し</h6>
                                            <p class="text-gray-600 text-xs">アクチュエーターに繋がる電気配線を抜きます。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-orange-500 w-7 h-7 text-xs flex-shrink-0">2</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">フランジボルトの取り外し（最難関）</h6>
                                            <p class="text-gray-600 text-xs">弁の前後のマフラーパイプを繋いでいるボルト（通常2本×2箇所）を外します。<br><span class="text-red-600 font-medium">注意：ここは非常に高温になるため、ボルトが錆びて痩せていたり、一体化しています。潤滑剤をたっぷり吹き、場合によってはサンダーで切断して外します。</span></p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-orange-500 w-7 h-7 text-xs flex-shrink-0">3</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">本体の摘出</h6>
                                            <p class="text-gray-600 text-xs">ボルトが外れれば、知恵の輪のように本体が外れます。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-orange-500 w-7 h-7 text-xs flex-shrink-0">4</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">新品取り付け</h6>
                                            <p class="text-gray-600 text-xs">新品のガスケットを挟み、新しいバルブAssyを取り付け。ボルトには「スレッドコンパウンド（焼き付き防止剤）」を塗っておくと、次回外す時に楽です。</p>
                                        </div>
                                    </div>
                                    <div class="flex gap-3">
                                        <span class="step-number bg-orange-500 w-7 h-7 text-xs flex-shrink-0">5</span>
                                        <div>
                                            <h6 class="font-bold text-gray-800 text-sm">初期学習</h6>
                                            <p class="text-gray-600 text-xs">交換後、診断機を使ってエラーコードを消去します。自動的に全開・全閉位置を学習する場合が多いですが、診断機で「初期化」が必要な車種もあります。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- プロのアドバイス -->
                    <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-xl p-5">
                        <h5 class="font-bold mb-4 flex items-center gap-2">
                            <i class="ri-user-star-fill text-yellow-400"></i>プロのアドバイス・総評
                        </h5>
                        <div class="space-y-3 text-sm">
                            <div class="flex gap-3">
                                <i class="ri-first-aid-kit-fill text-green-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-green-300">まず清掃から！</strong>
                                    <p class="text-gray-300 text-xs mt-1">P047Fが出ても、いきなり5万円の部品を買うのは早計です。<strong>7割くらいは「外部からの潤滑・洗浄リハビリ」で直ります</strong>。まずはラスペネ片手に車の下に潜り、ロッドを外してグリグリしてみてください。</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <i class="ri-alert-fill text-yellow-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-yellow-300">アクチュエーターの位置に注意</strong>
                                    <p class="text-gray-300 text-xs mt-1">清掃時、洗浄液をかけすぎてアクチュエーター（黒いプラスチックの箱）の中に液体が入ると、中の基盤やモーターがショートしてトドメを刺してしまいます。箱部分には直接かけないよう注意してください。</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <i class="ri-error-warning-fill text-red-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-red-300">DPFとの関連（放置厳禁！）</strong>
                                    <p class="text-gray-300 text-xs mt-1">この弁が壊れたまま放置すると、DPF再生が正常に行われず、最終的にDPF自体が詰まって<strong class="text-red-300">30万円コース（DPR交換）</strong>に発展します。エラーが出たら放置せず、早めの対処が財布を守ります。</p>
                                </div>
                            </div>
                            <div class="bg-green-900/50 rounded-lg p-3 mt-4">
                                <p class="text-gray-200 text-xs">💡 この作業はジャッキアップさえできればDIYでも挑戦しやすい部類です。まずは<strong class="text-green-300">「固着した弁のリハビリ」</strong>から始めてみることを強くお勧めします。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DPR交換 -->
            <div id="item-dpr-replace" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-indigo-500 to-purple-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-recycle-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">DPR交換（重整備・リビルト）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥120,000〜¥300,000</span>
                                <span class="text-sm opacity-90">難易度: ★★★★☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-indigo-500"></i>洗浄で直らなかった場合の最終手段
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                フィルター装置を丸ごと交換。<strong class="text-indigo-600">リビルト品（約12万円〜）</strong>か<strong class="text-indigo-600">新品（約30万円〜）</strong>で金額差あり。
                            </p>
                        </div>
                        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-xl">
                            <p class="text-gray-700 text-xs">
                                <strong>詰まりの原因:</strong> 汚れたオイルや規格外オイル（DL-1以外）の使用。オイル交換をサボるとDPR寿命が縮みます！
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl mb-6">
                        <div class="text-center">
                            <div class="text-xl font-bold text-green-600">数万〜10万円</div>
                            <div class="text-xs text-gray-600">DIY節約額</div>
                        </div>
                        <div class="flex-1 text-xs text-gray-700">
                            重量物脱着。ジャッキアップ作業で安全確保が命！
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/DRP交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/DRP交換.pdf" download class="pdf-btn bg-indigo-500 text-white hover:bg-indigo-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/DRP交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- エンジン -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="engine-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-settings-5-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">エンジン</h3>
                    <p class="text-gray-500 text-sm">Engine</p>
                </div>
            </div>

            <!-- タイミングベルト・WP一式交換 -->
            <div id="item-timing" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-green-500 to-emerald-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-timer-flash-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">タイミングベルト・WP一式交換</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥98,800</span>
                                <span class="text-sm opacity-90">難易度: ★★★☆☆</span>
                                <span class="bg-white/20 text-white text-xs px-2 py-1 rounded-full font-medium">10万km必須</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-alarm-warning-fill text-red-500"></i>これは時限爆弾です！
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                ベルトが切れるとピストンとバルブが衝突し、<strong class="text-red-600">エンジン全損（廃車コース）</strong>。「T-BELT」警告灯が点灯したら交換の合図！
                            </p>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-tools-line mr-1"></i>交換部品キット</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・タイミングベルト</li>
                                    <li>・オートテンショナー</li>
                                    <li>・ウォーターポンプ</li>
                                    <li>・LLC冷却水</li>
                                </ul>
                                <p class="text-green-600 text-xs mt-1">部品代：約1.5〜2.5万円</p>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-hammer-line mr-1"></i>必要な工具</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・ソケットレンチセット</li>
                                    <li>・22mmソケット</li>
                                    <li>・トルクレンチ</li>
                                    <li>・スクレーパー</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl">
                            <p class="text-gray-700 text-xs">
                                <strong>位置合わせが命:</strong> クランクの「合いマーク」を正確に合わせないとエンジン破損。1KDは構造が素直で初心者挑戦に人気！
                            </p>
                        </div>
                        <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                            <div class="text-center">
                                <div class="text-xl font-bold text-green-600">約7万円以上</div>
                                <div class="text-xs text-gray-600">DIY節約額</div>
                            </div>
                            <div class="flex-1 text-xs text-gray-700">
                                DIY効果が非常に高い項目！
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/タイミングベルトとウォーターポンプ交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/タイミングベルトとウォーターポンプ交換.pdf" download class="pdf-btn bg-green-500 text-white hover:bg-green-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/タイミングベルトとウォーターポンプ交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 駆動系 -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="drive-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-steering-2-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">駆動系</h3>
                    <p class="text-gray-500 text-sm">Drivetrain</p>
                </div>
            </div>

            <!-- ハブベアリング交換（通常） -->
            <div id="item-hub" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-violet-600 to-purple-600 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-disc-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">フロントハブベアリング交換（通常）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥97,700</span>
                                <span class="text-sm opacity-90">難易度: ★★★★★</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-violet-50 to-purple-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-violet-600"></i>どんな症状？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                走行中に<strong class="text-violet-600">「ゴォー」「ウォーン」という唸り音</strong>。速度が上がると音も大きく。放置すると<strong class="text-red-600">車輪ロック or 脱落の大事故</strong>に！
                            </p>
                        </div>
                        <div>
                            <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl mb-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>DIYは不可能:</strong> 油圧プレス機（数トン）がないとベアリングを抜くことも入れることもできません。約10万円の半分以上は技術料。
                                </p>
                            </div>
                            <div class="bg-yellow-50 rounded-xl p-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>早期発見が鍵:</strong> 音が小さいうちに交換すれば「通常」料金。無理して乗り続けて固着すると下の「43万円コース」に！
                                </p>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper bg-gray-700">
                        <div class="pdf-toolbar bg-gray-600">
                            <a href="document/フロントハブベアリング交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/フロントハブベアリング交換.pdf" download class="pdf-btn bg-violet-600 text-white hover:bg-violet-700">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/フロントハブベアリング交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- ハブベアリング交換（固着時） -->
            <div id="item-hub-stuck" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border-2 border-red-300">
                <div class="bg-gradient-to-r from-red-600 to-orange-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-fire-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">フロントハブベアリング交換（固着時）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥438,000</span>
                                <span class="bg-white/20 text-white text-xs px-2 py-1 rounded-full font-medium animate-pulse">最悪のシナリオ</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-alarm-warning-fill text-red-500"></i>なぜ43万円もするの？！
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                長年の錆や焼き付きで<strong class="text-red-600">部品同士が溶接されたように一体化</strong>。20トンプレスでもビクともせず、ナックルごと交換に。
                            </p>
                        </div>
                        <div>
                            <div class="bg-gray-100 rounded-xl p-3 mb-3">
                                <h6 class="font-bold text-gray-800 text-xs mb-1">交換部品（足回り全交換）</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・ステアリングナックル（左右）</li>
                                    <li>・フロントハブASSY（左右）</li>
                                    <li>・センサー類すべて</li>
                                </ul>
                                <p class="text-red-600 text-xs mt-1">部品代だけで20〜30万円...</p>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>回避策:</strong> 中古の「ナックル＋ハブセット」を解体屋で探せば、持ち込みで10〜15万円に抑えられる可能性！
                                </p>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper bg-gray-700">
                        <div class="pdf-toolbar bg-gray-600">
                            <a href="document/ベアリング交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/ベアリング交換.pdf" download class="pdf-btn bg-red-500 text-white hover:bg-red-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/ベアリング交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- ATミッション載せ替え -->
            <div id="item-at" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-pink-500 to-rose-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-dashboard-3-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">ATミッション載せ替え（リビルト）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥313,900</span>
                                <span class="text-sm opacity-90">難易度: ★★★★★</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- 概要説明 -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-pink-50 to-rose-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-pink-500"></i>何をする作業？
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                エンジンの回転をタイヤに伝える変速機（オートマチック・トランスミッション）を丸ごと交換する作業です。ハイエースのオートマは非常に頑丈ですが、<strong class="text-pink-600">過積載やメンテナンス不足（ATF未交換）で酷使されると、内部のクラッチやギアが摩耗</strong>し、最終的に動力が伝わらなくなります。
                            </p>
                        </div>
                        <div>
                            <div class="bg-red-100 border-l-4 border-red-500 p-4 rounded-r-xl mb-3">
                                <h6 class="font-bold text-red-800 text-sm mb-2"><i class="ri-alarm-warning-fill mr-1"></i>これが出たら末期症状！</h6>
                                <ul class="text-gray-700 text-xs space-y-1">
                                    <li><strong>滑り：</strong>アクセルを踏んでもエンジン音だけが「ブォーン」と上がり、スピードが出ない</li>
                                    <li><strong>変速ショック：</strong>ギアが変わる時に「ドン！」という大きな衝撃</li>
                                    <li><strong>変速しない：</strong>いつまでも3速固定などになる</li>
                                    <li><strong>バックしない：</strong>Rに入れても車が動かない</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 費用内訳 -->
                    <div class="bg-gray-800 text-white rounded-xl p-5 mb-6">
                        <h5 class="font-bold mb-4 flex items-center gap-2">
                            <i class="ri-money-yen-circle-line text-yellow-400"></i>費用の内訳（約31万円）
                        </h5>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="bg-gray-700 rounded-lg p-3">
                                <div class="text-yellow-400 font-bold text-lg">¥15〜20万</div>
                                <div class="text-xs text-gray-300 mt-1">リビルトミッション本体</div>
                                <div class="text-xs text-gray-400">（中身を新品部品に入れ替えた再生品）</div>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-3">
                                <div class="text-yellow-400 font-bold text-lg">¥8〜10万</div>
                                <div class="text-xs text-gray-300 mt-1">脱着工賃</div>
                                <div class="text-xs text-gray-400">（プロでも丸1日かかる重作業）</div>
                            </div>
                            <div class="bg-gray-700 rounded-lg p-3">
                                <div class="text-yellow-400 font-bold text-lg">¥1〜2万</div>
                                <div class="text-xs text-gray-300 mt-1">ATF（オートマオイル）</div>
                                <div class="text-xs text-gray-400">（全量交換で大量に必要）</div>
                            </div>
                        </div>
                    </div>

                    <!-- 難易度と必要設備 -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-red-50 rounded-xl p-4">
                            <h6 class="font-bold text-red-800 text-sm mb-2"><i class="ri-skull-2-fill mr-1"></i>難易度：超上級・設備必須 ★★★★★</h6>
                            <ul class="text-gray-700 text-xs space-y-1">
                                <li>・ミッション本体は<strong class="text-red-600">50kg〜80kg</strong>近い鉄の塊</li>
                                <li>・リフトで車を持ち上げ、「ミッションジャッキ」という専用の支えがないと、下敷きになって<strong class="text-red-600">命に関わります</strong></li>
                                <li>・<strong>作業時間：1日〜数日</strong>（プロでも朝から夕方までかかる）</li>
                            </ul>
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-blue-50 rounded-xl p-3">
                                <h6 class="font-bold text-blue-800 text-xs mb-1"><i class="ri-tools-line mr-1"></i>必要な部品</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・リビルトATミッション</li>
                                    <li>・ATF 10〜20L</li>
                                    <li>・（トヨタ純正オートフルードWS等）</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-3">
                                <h6 class="font-bold text-green-800 text-xs mb-1"><i class="ri-hammer-line mr-1"></i>必須設備</h6>
                                <ul class="text-gray-700 text-xs space-y-0.5">
                                    <li>・<strong>リフト</strong>（必須）</li>
                                    <li>・<strong>ミッションジャッキ</strong></li>
                                    <li>・1mエクステンションバー</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- 作業ステップ（アコーディオン） -->
                    <div class="mb-6">
                        <button onclick="toggleAccordion(this)" class="w-full flex items-center justify-between bg-gradient-to-r from-pink-100 to-rose-100 p-4 rounded-xl text-left hover:from-pink-200 hover:to-rose-200 transition">
                            <span class="font-bold text-gray-800"><i class="ri-list-ordered mr-2"></i>作業ステップ（5段階）</span>
                            <i class="ri-arrow-down-s-line text-xl accordion-icon transition-transform"></i>
                        </button>
                        <div class="accordion-content overflow-hidden max-h-0 transition-all duration-300">
                            <div class="p-4 bg-white border border-t-0 border-gray-200 rounded-b-xl space-y-4">
                                <div class="flex gap-3">
                                    <span class="step-number bg-pink-500 w-8 h-8 text-sm flex-shrink-0">1</span>
                                    <div>
                                        <h6 class="font-bold text-gray-800 text-sm">周辺部品の取り外し</h6>
                                        <p class="text-gray-600 text-xs">バッテリーのマイナス端子を外す → プロペラシャフト（動力を伝える長い棒）を外す → スターター（セルモーター）を外す → ATFクーラーホースを切り離す（オイルが出ます）</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <span class="step-number bg-pink-500 w-8 h-8 text-sm flex-shrink-0">2</span>
                                    <div>
                                        <h6 class="font-bold text-gray-800 text-sm">トルクコンバーターの切り離し（難所）</h6>
                                        <p class="text-gray-600 text-xs">エンジンとミッションの間にある「トルクコンバーター（ドーナツ型の部品）」とエンジンを繋いでいるボルト（通常6本）を、小さな隙間から回して外します。クランクを回してボルト位置を合わせながら、1本ずつ外す地味で大変な作業です。</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <span class="step-number bg-pink-500 w-8 h-8 text-sm flex-shrink-0">3</span>
                                    <div>
                                        <h6 class="font-bold text-gray-800 text-sm">ミッション本体の分離</h6>
                                        <p class="text-gray-600 text-xs">ミッションジャッキを掛けて支える → エンジンとミッションを結合している太いボルト（ベルハウジングボルト）を全周外す ※上の方のボルトは手が入らないため、1mくらいの延長棒を使って回します</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <span class="step-number bg-pink-500 w-8 h-8 text-sm flex-shrink-0">4</span>
                                    <div>
                                        <h6 class="font-bold text-gray-800 text-sm">ミッション下ろし</h6>
                                        <p class="text-gray-600 text-xs">ミッションをエンジンの反対側へスライドさせて引き抜く → バランスを崩すとミッションが落下して大事故に！慎重にジャッキを下げて車体から出します</p>
                                    </div>
                                </div>
                                <div class="flex gap-3">
                                    <span class="step-number bg-pink-500 w-8 h-8 text-sm flex-shrink-0">5</span>
                                    <div>
                                        <h6 class="font-bold text-gray-800 text-sm">載せ替えとATF注入</h6>
                                        <p class="text-gray-600 text-xs">新しいリビルトミッションをジャッキに乗せ、逆の手順で組み付け → ATF注入と油面調整：診断機を使って適正な油温（35℃〜45℃）にし、オーバーフロープラグから溢れ出る量で厳密に調整。ここを適当にやると、せっかくの新品ミッションがまた壊れます。</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- プロのアドバイス -->
                    <div class="bg-gradient-to-r from-gray-800 to-gray-900 text-white rounded-xl p-5">
                        <h5 class="font-bold mb-4 flex items-center gap-2">
                            <i class="ri-user-star-fill text-yellow-400"></i>プロのアドバイス・総評
                        </h5>
                        <div class="space-y-3 text-sm">
                            <div class="flex gap-3">
                                <i class="ri-close-circle-fill text-red-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-red-300">DIYは「やめておくべき」</strong>
                                    <p class="text-gray-300 text-xs mt-1">他の項目（オルタネーターやラジエーター）はDIYをお勧めしましたが、ミッション載せ替えだけは<strong>「設備（リフト）」がない限り不可能</strong>に近いです。寝板で潜ってやる猛者もいますが、ミッションがお腹の上に落ちて怪我をするリスクが高すぎます。</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <i class="ri-alert-fill text-yellow-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-yellow-300">リビルトの品質に注意</strong>
                                    <p class="text-gray-300 text-xs mt-1">安すぎるリビルト品（10万円以下など）は、中身の清掃だけで部品交換していない「なんちゃってリビルト」の場合があります。信頼できる「リンク品（メーカー系）」や保証付きのものを選んでください。</p>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <i class="ri-shield-check-fill text-green-400 text-xl flex-shrink-0"></i>
                                <div>
                                    <strong class="text-green-300">予防整備が最強</strong>
                                    <p class="text-gray-300 text-xs mt-1">こうならないためには、<strong>「4万キロごとのATF交換」</strong>が最強の予防策です。「無交換でOK」と言われることもありますが、長く乗るハイエースなら交換推奨です。</p>
                                </div>
                            </div>
                            <div class="bg-gray-700/50 rounded-lg p-3 mt-4">
                                <p class="text-gray-200 text-xs">💡 31万円は高額ですが、これを直せばさらに<strong class="text-yellow-300">10万キロ、20万キロ</strong>と走れるようになります。エンジンが元気なら、投資する価値はある修理です。</p>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/ATミッション交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/ATミッション交換.pdf" download class="pdf-btn bg-pink-500 text-white hover:bg-pink-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/ATミッション交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 電装系 -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="electric-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-flashlight-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">電装系</h3>
                    <p class="text-gray-500 text-sm">Electrical</p>
                </div>
            </div>

            <!-- オルタネーター交換 -->
            <div id="item-alternator" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-amber-500 to-yellow-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-battery-charge-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">オルタネーター交換（リビルト）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥64,600〜¥83,000</span>
                                <span class="text-sm opacity-90">難易度: ★★★☆☆</span>
                                <span class="bg-white/20 text-white text-xs px-2 py-1 rounded-full font-medium">DIY向き！</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-yellow-50 to-amber-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-yellow-500"></i>車の充電器！
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                エンジンで電気を作る「発電機」。<strong class="text-yellow-600">「ヒュイーン」という異音、バッテリー警告灯</strong>が故障サイン。壊れると数十分でエンジン停止！
                            </p>
                        </div>
                        <div>
                            <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl mb-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>絶対厳守:</strong> バッテリーのマイナス端子を必ず外してから作業！ショートさせると車両火災の危険。
                                </p>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                                <div class="text-center">
                                    <div class="text-xl font-bold text-green-600">約3〜5万円</div>
                                    <div class="text-xs text-gray-600">DIY節約額</div>
                                </div>
                                <div class="flex-1 text-xs text-gray-700">
                                    初心者の「脱・初心者」にちょうど良い！
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/オルタネータ交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/オルタネータ交換.pdf" download class="pdf-btn bg-yellow-500 text-white hover:bg-yellow-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/オルタネータ交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 空調・冷却系 -->
        <div class="mb-16">
            <div class="flex items-center gap-3 mb-6">
                <div class="cooling-gradient w-12 h-12 rounded-xl flex items-center justify-center text-white text-2xl shadow-lg">
                    <i class="ri-temp-cold-fill"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">空調・冷却系</h3>
                    <p class="text-gray-500 text-sm">A/C & Cooling</p>
                </div>
            </div>

            <!-- エアコンコンプレッサー交換 -->
            <div id="item-ac" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-sky-500 to-blue-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-snowflake-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">エアコンコンプレッサー交換</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥94,600</span>
                                <span class="text-sm opacity-90">難易度: ★★★★☆</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-sky-50 to-blue-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-sky-500"></i>エアコンの心臓！
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                冷媒を圧縮して循環させるポンプ。冷風が出ない、ガラガラ音、焼き付いてエンストする場合は交換が必要。
                            </p>
                        </div>
                        <div>
                            <div class="bg-red-50 border-l-4 border-red-400 p-3 rounded-r-xl mb-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>法律違反:</strong> エアコンガスの大気開放は禁止（フロン排出抑制法）。電装屋でガス回収してから作業。
                                </p>
                            </div>
                            <div class="bg-yellow-50 rounded-xl p-3 mb-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>真空引きが超重要:</strong> 配管内の空気や水分を完全に抜かないと、すぐ壊れたり冷えが悪くなります。
                                </p>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                                <div class="text-center">
                                    <div class="text-xl font-bold text-green-600">約4万円</div>
                                    <div class="text-xs text-gray-600">DIY節約額</div>
                                </div>
                                <div class="flex-1 text-xs text-gray-700">
                                    冷たい風が出た瞬間の感動は格別！
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/エアコンコンプレッサー_DIY挑戦.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/エアコンコンプレッサー_DIY挑戦.pdf" download class="pdf-btn bg-sky-500 text-white hover:bg-sky-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/エアコンコンプレッサー_DIY挑戦.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>

            <!-- ラジエーター交換 -->
            <div id="item-radiator" class="maintenance-item bg-white rounded-2xl shadow-lg mb-8 overflow-hidden border border-gray-100">
                <div class="bg-gradient-to-r from-blue-500 to-indigo-500 p-4">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center">
                            <i class="ri-water-flash-fill text-white text-2xl"></i>
                        </div>
                        <div class="text-white">
                            <h4 class="font-bold text-xl">ラジエーター交換（Assy）</h4>
                            <div class="flex items-center gap-4 mt-1">
                                <span class="text-2xl font-bold">¥78,000</span>
                                <span class="text-sm opacity-90">難易度: ★★★☆☆</span>
                                <span class="bg-white/20 text-white text-xs px-2 py-1 rounded-full font-medium">DIY効果大！</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <!-- コンテンツ -->
                    <div class="grid md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-5">
                            <h5 class="font-bold text-gray-800 mb-2 flex items-center gap-2">
                                <i class="ri-question-line text-blue-500"></i>エンジンの熱交換器
                            </h5>
                            <p class="text-gray-700 text-sm leading-relaxed">
                                冷却水を走行風で冷やす装置。<strong class="text-blue-600">甘い匂い、地面に赤/緑のシミ、水温計がH振り切り</strong>が故障サイン。オーバーヒートでエンジン焼き付き！
                            </p>
                        </div>
                        <div>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-3 rounded-r-xl mb-3">
                                <p class="text-gray-700 text-xs">
                                    <strong>ハイエース特有:</strong> リアヒーターまで長いパイプが伸びているため、エア抜きに30分〜1時間かかります。
                                </p>
                            </div>
                            <div class="flex items-center gap-3 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-xl">
                                <div class="text-center">
                                    <div class="text-xl font-bold text-green-600">約5万円以上</div>
                                    <div class="text-xs text-gray-600">DIY節約額</div>
                                </div>
                                <div class="flex-1 text-xs text-gray-700">
                                    社外品なら部品代1.5〜2.5万円。DIY効果大！
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- PDF: 横幅いっぱい -->
                    <div class="pdf-wrapper">
                        <div class="pdf-toolbar">
                            <a href="document/ハイエース_ラジエーター_交換.pdf" target="_blank" class="pdf-btn bg-white text-gray-700 hover:bg-gray-100 border border-gray-300">
                                <i class="ri-fullscreen-line"></i>拡大表示
                            </a>
                            <a href="document/ハイエース_ラジエーター_交換.pdf" download class="pdf-btn bg-blue-500 text-white hover:bg-blue-600">
                                <i class="ri-download-line"></i>ダウンロード
                            </a>
                        </div>
                        <div class="pdf-canvas-container" data-pdf="document/ハイエース_ラジエーター_交換.pdf"><div class="pdf-loading"><div class="pdf-spinner"></div><div class="pdf-loading-text">PDFを読み込んでいます...</div><div class="pdf-progress-bar"><div class="pdf-progress-fill" style="width: 0%"></div></div></div></div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<!-- 総合PDF資料セクション -->
<section id="pdf-library" class="py-16 px-4 bg-gradient-to-b from-gray-50 to-white">
    <div class="container mx-auto max-w-7xl">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">
                <i class="ri-book-open-fill text-blue-500 mr-2"></i>総合PDF資料
            </h2>
            <p class="text-gray-600">ハイエース整備の全体像を把握するための総合資料</p>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- 総合メンテナンス -->
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-4 py-3 flex items-center justify-between">
                    <h3 class="text-white font-bold text-sm flex items-center gap-2">
                        <i class="ri-file-pdf-2-fill"></i>整備全項目まとめ
                    </h3>
                    <div class="flex gap-2">
                        <a href="document/ハイエース整備全項目まとめ.pdf" target="_blank" class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-xs transition">
                            <i class="ri-fullscreen-line"></i>
                        </a>
                        <a href="document/ハイエース整備全項目まとめ.pdf" download class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-xs transition">
                            <i class="ri-download-line"></i>
                        </a>
                    </div>
                </div>
                <div style="height: 600px;">
                    <iframe src="document/ハイエース整備全項目まとめ.pdf#view=FitH" title="整備全項目まとめPDF" width="100%" height="100%" style="border: none;"></iframe>
                </div>
            </div>

            <!-- 吸気系リフレッシュ戦略 -->
            <div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-teal-600 to-cyan-600 px-4 py-3 flex items-center justify-between">
                    <h3 class="text-white font-bold text-sm flex items-center gap-2">
                        <i class="ri-file-pdf-2-fill"></i>吸気系リフレッシュ戦略
                    </h3>
                    <div class="flex gap-2">
                        <a href="document/1KD吸気系リフレッシュ戦略_プロとDIYの境界線.pdf" target="_blank" class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-xs transition">
                            <i class="ri-fullscreen-line"></i>
                        </a>
                        <a href="document/1KD吸気系リフレッシュ戦略_プロとDIYの境界線.pdf" download class="bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-xs transition">
                            <i class="ri-download-line"></i>
                        </a>
                    </div>
                </div>
                <div style="height: 600px;">
                    <iframe src="document/1KD吸気系リフレッシュ戦略_プロとDIYの境界線.pdf#view=FitH" title="吸気系リフレッシュ戦略PDF" width="100%" height="100%" style="border: none;"></iframe>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-gray-900 text-white py-12">
    <div class="container mx-auto px-4 text-center">
        <a href="index.html" class="inline-flex items-center gap-3 mb-6">
            <img src="assets/images/b295aa9fa2c904bc29a0e5e438249d00.jpg" alt="TrailFusion AI" class="h-12 rounded-full">
            <span class="text-2xl font-bold">TrailFusion AI</span>
        </a>
        <div class="flex justify-center gap-4 mb-6">
            <a href="https://www.youtube.com/@van_oasis" target="_blank" class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center hover:bg-red-600 transition">
                <i class="ri-youtube-fill text-xl"></i>
            </a>
            <a href="https://www.tiktok.com/@trailfusionai" target="_blank" class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition">
                <i class="ri-tiktok-fill text-xl"></i>
            </a>
            <a href="https://x.com/trailfusionai" target="_blank" class="w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition">
                <i class="ri-twitter-x-fill text-xl"></i>
            </a>
        </div>
        <p class="text-gray-400">&copy; 2025 TrailFusion AI. All rights reserved.</p>
    </div>
</footer>

<!-- Scroll to Top -->
<button id="scrollToTop" class="fixed bottom-8 right-8 bg-gradient-to-r from-blue-500 to-purple-500 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:shadow-xl z-50">
    <i class="ri-arrow-up-line text-xl"></i>
</button>

<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
<script>
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

// Intersection Observer for lazy loading PDFs
const pdfObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const container = entry.target;
            if (!container.dataset.loaded) {
                container.dataset.loaded = 'true';
                loadPDF(container);
            }
            pdfObserver.unobserve(container);
        }
    });
}, { rootMargin: '200px' });

// Observe all PDF containers
document.querySelectorAll('.pdf-canvas-container[data-pdf]').forEach(container => {
    pdfObserver.observe(container);
});

async function loadPDF(container) {
    const pdfUrl = container.dataset.pdf;
    const loadingEl = container.querySelector('.pdf-loading');
    const progressFill = container.querySelector('.pdf-progress-fill');
    const loadingText = container.querySelector('.pdf-loading-text');

    try {
        const loadingTask = pdfjsLib.getDocument(pdfUrl);

        loadingTask.onProgress = function(progress) {
            if (progress.total > 0) {
                const percent = Math.round((progress.loaded / progress.total) * 100);
                if (progressFill) progressFill.style.width = percent + '%';
            }
        };

        const pdfDoc = await loadingTask.promise;

        // Remove loading indicator
        if (loadingEl) loadingEl.remove();

        // Calculate container width
        const containerWidth = container.clientWidth - 16;

        // Render first 3 pages only for performance
        const maxPages = Math.min(3, pdfDoc.numPages);

        for (let i = 1; i <= maxPages; i++) {
            const page = await pdfDoc.getPage(i);

            // Calculate scale to fit container width
            const defaultViewport = page.getViewport({ scale: 1 });
            const scale = containerWidth / defaultViewport.width;
            const viewport = page.getViewport({ scale });

            // For high DPI displays
            const outputScale = window.devicePixelRatio || 1;

            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');

            // Set actual size in memory (scaled for retina)
            canvas.width = Math.floor(viewport.width * outputScale);
            canvas.height = Math.floor(viewport.height * outputScale);

            // Set display size (CSS pixels)
            canvas.style.width = Math.floor(viewport.width) + 'px';
            canvas.style.height = Math.floor(viewport.height) + 'px';

            context.scale(outputScale, outputScale);

            container.appendChild(canvas);

            await page.render({
                canvasContext: context,
                viewport: viewport
            }).promise;
        }

        // Add "View More" button if more pages exist
        if (pdfDoc.numPages > 3) {
            const moreBtn = document.createElement('a');
            moreBtn.href = 'document/viewer.html?pdf=' + encodeURIComponent(pdfUrl.replace('document/', ''));
            moreBtn.className = 'inline-flex items-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg text-sm font-medium transition mt-4';
            moreBtn.innerHTML = '<i class="ri-file-pdf-2-line"></i>全 ' + pdfDoc.numPages + ' ページを見る';
            container.appendChild(moreBtn);
        }

    } catch (error) {
        console.error('PDF load error:', error);
        if (loadingText) loadingText.textContent = 'PDF読み込みエラー';
    }
}
</script>

<script>
function toggleAccordion(btn) {
    const content = btn.nextElementSibling;
    const icon = btn.querySelector('.accordion-icon');

    // Close all other accordions
    document.querySelectorAll('.accordion-content.open').forEach(el => {
        if (el !== content) {
            el.classList.remove('open');
            el.previousElementSibling.querySelector('.accordion-icon').style.transform = 'rotate(0deg)';
        }
    });

    // Toggle current
    content.classList.toggle('open');
    icon.style.transform = content.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
}

// Scroll to top
const scrollBtn = document.getElementById('scrollToTop');
window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
        scrollBtn.classList.remove('opacity-0', 'invisible');
        scrollBtn.classList.add('opacity-100', 'visible');
    } else {
        scrollBtn.classList.remove('opacity-100', 'visible');
        scrollBtn.classList.add('opacity-0', 'invisible');
    }
});
scrollBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

// Smooth scroll for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
});

// Mobile menu toggle
const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
const mobileMenu = document.getElementById('mobile-menu');
if (mobileMenuToggle && mobileMenu) {
    mobileMenuToggle.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });
}
</script>
</body>
</html>
