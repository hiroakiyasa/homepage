# è»Šæ—…ã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ï¼ˆCAR Conciergeï¼‰å®Œå…¨æ©Ÿèƒ½ä»•æ§˜æ›¸

## ç›®æ¬¡
1. [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¦‚è¦](#1-ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¦‚è¦)
2. [æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯](#2-æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#3-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
4. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#4-ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
5. [ç”»é¢ä¸€è¦§ã¨è©³ç´°æ©Ÿèƒ½](#5-ç”»é¢ä¸€è¦§ã¨è©³ç´°æ©Ÿèƒ½)
6. [ã‚µãƒ¼ãƒ“ã‚¹å±¤](#6-ã‚µãƒ¼ãƒ“ã‚¹å±¤)
7. [çŠ¶æ…‹ç®¡ç†](#7-çŠ¶æ…‹ç®¡ç†)
8. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#8-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
9. [UI/UXãƒ‘ã‚¿ãƒ¼ãƒ³](#9-uiuxãƒ‘ã‚¿ãƒ¼ãƒ³)
10. [é§è»Šæ–™é‡‘è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ](#10-é§è»Šæ–™é‡‘è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
11. [ä½ç½®æƒ…å ±æ©Ÿèƒ½](#11-ä½ç½®æƒ…å ±æ©Ÿèƒ½)
12. [èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†](#12-èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†)
13. [ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿æ©Ÿèƒ½ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ï¼‰](#13-ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿æ©Ÿèƒ½ã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°)
14. [ç’°å¢ƒå¤‰æ•°ã¨è¨­å®š](#14-ç’°å¢ƒå¤‰æ•°ã¨è¨­å®š)
15. [ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤](#15-ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤)

---

## 1. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¦‚è¦

### 1.1 ã‚¢ãƒ—ãƒªå
**è»Šæ—…ã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ï¼ˆCAR Conciergeï¼‰**

### 1.2 ç›®çš„
æ—¥æœ¬å›½å†…ã§ã®è»Šæ—…ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚é§è»Šå ´ã€ã‚³ãƒ³ãƒ“ãƒ‹ã€æ¸©æ³‰ã€ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰ã€ãŠç¥­ã‚Šãªã©ã®æƒ…å ±ã‚’åœ°å›³ä¸Šã§è¡¨ç¤ºã—ã€æœ€é©ãªã‚¹ãƒãƒƒãƒˆã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚

### 1.3 ä¸»è¦æ©Ÿèƒ½
1. **åœ°å›³è¡¨ç¤ºæ©Ÿèƒ½**ï¼šã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªåœ°å›³ä¸Šã«å„ç¨®æ–½è¨­ã‚’è¡¨ç¤º
2. **é§è»Šå ´æ–™é‡‘è¨ˆç®—**ï¼šè¤‡é›‘ãªæ–™é‡‘ä½“ç³»ï¼ˆåŸºæœ¬æ–™é‡‘ã€ç´¯é€²æ–™é‡‘ã€æœ€å¤§æ–™é‡‘ã€æ™‚é–“å¸¯åˆ¥æ–™é‡‘ã€24æ™‚é–“è¶…ã®è¡¨è¨˜å¯¾å¿œï¼‰ã«å¯¾å¿œ
3. **ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º**ï¼šé§è»Šæ–™é‡‘ãŒå®‰ã„é †ã«ä¸Šä½20ä»¶ã‚’è¡¨ç¤º
4. **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½**ï¼šã‚«ãƒ†ã‚´ãƒªã€æ¨™é«˜ã€å‘¨è¾ºæ–½è¨­ã€é§è»Šå ´ã‚¿ã‚¤ãƒ—ã§ãƒ•ã‚£ãƒ«ã‚¿
5. **å‘¨è¾ºæ–½è¨­æ¤œç´¢**ï¼šã‚³ãƒ³ãƒ“ãƒ‹ãƒ»æ¸©æ³‰ãƒ»ãƒˆã‚¤ãƒ¬ã¸ã®è·é›¢ã‚’è¡¨ç¤º
6. **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½**ï¼šé§è»Šå ´ã¨æ¸©æ³‰ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ãƒ»é–²è¦§
7. **ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½**ï¼šé§è»Šå ´ã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ 
8. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿æ©Ÿèƒ½**ï¼šé§è»Šå ´ã®çœ‹æ¿å†™çœŸã‚’OCRã§è‡ªå‹•è§£æã—ã¦æŠ•ç¨¿
9. **èªè¨¼æ©Ÿèƒ½**ï¼šãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€Google OAuth

### 1.4 å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
- iOSï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
- Androidï¼ˆå¯¾å¿œï¼‰
- Webï¼ˆé™å®šçš„å¯¾å¿œï¼‰

### 1.5 ãƒãƒ³ãƒ‰ãƒ«è­˜åˆ¥å­
- iOS: `com.carconciege.app`
- Android: `com.carconciege.app`

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### 2.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **React Native**: 0.74.5
- **Expo SDK**: 54
- **TypeScript**: 5.3.3ï¼ˆstrict modeæœ‰åŠ¹ï¼‰
- **React Navigation**: @react-navigation/native ^6.1.18
- **React Query**: @tanstack/react-query ^5.56.2

### 2.2 çŠ¶æ…‹ç®¡ç†
- **Zustand**: ^4.5.5ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†ï¼‰

### 2.3 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **Supabase**: PostgreSQL + Realtime + Storage + Edge Functions
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: PostgreSQL 15+
  - èªè¨¼: Supabase Authï¼ˆãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã€Google OAuthï¼‰
  - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: Supabase Storageï¼ˆç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
  - Edge Functions: Deno runtimeï¼ˆOCRå‡¦ç†ï¼‰

### 2.4 åœ°å›³
- **react-native-maps**: ^1.18.0ï¼ˆiOS: Apple Mapsã€Android: Google Mapsï¼‰
- **react-leaflet**: ^4.2.1ï¼ˆWebç”¨ï¼‰

### 2.5 ãã®ä»–ä¸»è¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **expo-location**: GPSä½ç½®æƒ…å ±å–å¾—
- **expo-image-picker**: ã‚«ãƒ¡ãƒ©ãƒ»ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‚¢ã‚¯ã‚»ã‚¹
- **react-native-gesture-handler**: ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼å‡¦ç†
- **@gorhom/bottom-sheet**: ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ UI

### 2.6 å¤–éƒ¨API
- **Gemini 2.5 Flash API**: é§è»Šå ´çœ‹æ¿ã®OCR + æ–™é‡‘æ­£è¦åŒ–
- **Google Cloud Vision API**: ç”»åƒãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3.1 ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           React Navigation Stack            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MapScreen (ãƒ¡ã‚¤ãƒ³ç”»é¢)                      â”‚
â”‚  â”œâ”€â”€ CompactBottomPanel (ãƒ•ã‚£ãƒ«ã‚¿)          â”‚
â”‚  â”œâ”€â”€ CategoryButtons (ã‚«ãƒ†ã‚´ãƒªé¸æŠ)         â”‚
â”‚  â”œâ”€â”€ CustomMarker (ãƒãƒ¼ã‚«ãƒ¼)                â”‚
â”‚  â”œâ”€â”€ RankingListModal (ãƒ©ãƒ³ã‚­ãƒ³ã‚°)         â”‚
â”‚  â””â”€â”€ SpotDetailBottomSheet (è©³ç´°)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ãã®ä»–ã®ç”»é¢                                â”‚
â”‚  â”œâ”€â”€ èªè¨¼ç”»é¢ (Login, SignUp, etc.)         â”‚
â”‚  â”œâ”€â”€ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢                        â”‚
â”‚  â”œâ”€â”€ ãŠæ°—ã«å…¥ã‚Šç”»é¢                          â”‚
â”‚  â”œâ”€â”€ ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§ç”»é¢                        â”‚
â”‚  â”œâ”€â”€ é§è»Šå ´æŠ•ç¨¿ç”»é¢ (AddParkingScreen)      â”‚
â”‚  â””â”€â”€ æŠ•ç¨¿ç®¡ç†ç”»é¢ (AdminSubmissionsScreen)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Zustand Stores                     â”‚
â”‚  â”œâ”€â”€ useMainStore (æ¤œç´¢ã€åœ°å›³ã€UIçŠ¶æ…‹)      â”‚
â”‚  â””â”€â”€ useAuthStore (èªè¨¼çŠ¶æ…‹)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ ã‚µãƒ¼ãƒ“ã‚¹å±¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Services Layer                     â”‚
â”‚  â”œâ”€â”€ SupabaseService (ãƒ‡ãƒ¼ã‚¿å–å¾—)           â”‚
â”‚  â”œâ”€â”€ SearchService (æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿)         â”‚
â”‚  â”œâ”€â”€ ParkingFeeCalculator (æ–™é‡‘è¨ˆç®—)        â”‚
â”‚  â”œâ”€â”€ LocationService (GPS)                  â”‚
â”‚  â”œâ”€â”€ AuthService (èªè¨¼)                     â”‚
â”‚  â”œâ”€â”€ ReviewService (ãƒ¬ãƒ“ãƒ¥ãƒ¼)               â”‚
â”‚  â””â”€â”€ FavoritesService (ãŠæ°—ã«å…¥ã‚Š)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Supabase Backend                   â”‚
â”‚  â”œâ”€â”€ PostgreSQL Database                    â”‚
â”‚  â”‚   â”œâ”€â”€ parking_spots                      â”‚
â”‚  â”‚   â”œâ”€â”€ convenience_stores                 â”‚
â”‚  â”‚   â”œâ”€â”€ hot_springs                        â”‚
â”‚  â”‚   â”œâ”€â”€ gas_stations                       â”‚
â”‚  â”‚   â”œâ”€â”€ festivals                          â”‚
â”‚  â”‚   â”œâ”€â”€ parking_reviews                    â”‚
â”‚  â”‚   â”œâ”€â”€ parking_submissions (æŠ•ç¨¿)         â”‚
â”‚  â”‚   â””â”€â”€ user_profiles                      â”‚
â”‚  â”œâ”€â”€ Supabase Auth                          â”‚
â”‚  â”œâ”€â”€ Storage (parking-submissions bucket)   â”‚
â”‚  â””â”€â”€ Edge Functions                         â”‚
â”‚      â””â”€â”€ process-parking-image (OCR)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ** â†’ MapScreen
2. **æ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** â†’ SearchService â†’ SupabaseService
3. **ãƒ‡ãƒ¼ã‚¿å–å¾—** â†’ Supabase PostgreSQL
4. **æ–™é‡‘è¨ˆç®—** â†’ ParkingFeeCalculator (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´)
5. **çŠ¶æ…‹æ›´æ–°** â†’ useMainStore (Zustand)
6. **UIæ›´æ–°** â†’ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 3.3 ãƒ‘ã‚¹åˆ¥åè¨­å®š
```typescript
"@/": "src/"
"@components/": "src/components/"
"@screens/": "src/screens/"
"@services/": "src/services/"
"@stores/": "src/stores/"
"@types/": "src/types/"
"@utils/": "src/utils/"
"@config/": "src/config/"
"@assets/": "src/assets/"
```

---

## 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 4.1 Spotï¼ˆåŸºæœ¬ã‚¹ãƒãƒƒãƒˆï¼‰
```typescript
interface Spot {
  id: string;
  name: string;
  lat: number;
  lng: number;
  category: string;
  type?: string;
  description?: string;
  address?: string;
  rating?: number;
  quietness?: number;
  rank?: number;
  prefecture?: string;
  elevation?: number;
}
```

### 4.2 CoinParkingï¼ˆé§è»Šå ´ï¼‰
```typescript
interface CoinParking extends Spot {
  originalFees?: string;
  rates: ParkingRate[];  // æ–™é‡‘é…åˆ—
  hours?: HoursInfo;     // å–¶æ¥­æ™‚é–“
  capacity?: number;
  paymentMethods?: string;
  restrictions?: string;
  vehicleDimensions?: VehicleDimensions;
  calculatedFee?: number;  // è¨ˆç®—æ¸ˆã¿æ–™é‡‘
  nearestConvenienceStore?: NearbyFacility;
  nearestHotspring?: NearbyFacility;
  nearest_toilet?: NearbyFacility;
  isOpenDuringParking?: boolean;
  operatingStatus?: string;
  parkingType?: string;  // å¹³é¢é§è»Šå ´ã€ç«‹ä½“é§è»Šå ´ã€æ©Ÿæ¢°å¼ã€è»Šä¸­æ³Šãƒ»ã‚­ãƒ£ãƒ³ãƒ—å ´
}
```

### 4.3 ParkingRateï¼ˆæ–™é‡‘æ§‹é€ ï¼‰
```typescript
interface ParkingRate {
  id: string;
  type: string;        // "base", "progressive", "max"
  minutes: number;     // æ™‚é–“å˜ä½ï¼ˆåˆ†ï¼‰
  price: number;       // æ–™é‡‘ï¼ˆå††ï¼‰
  timeRange?: string;  // æ™‚é–“å¸¯ "8:00ï½20:00", "25:30ï½5:30"ï¼ˆ24æ™‚é–“è¶…å¯¾å¿œï¼‰
  dayType?: string;
  applyAfter?: number; // ç´¯é€²æ–™é‡‘ã®é©ç”¨é–‹å§‹æ™‚é–“ï¼ˆåˆ†ï¼‰
}
```

### 4.4 HoursInfoï¼ˆå–¶æ¥­æ™‚é–“ï¼‰
```typescript
interface HoursInfo {
  hours?: string;
  is_24h?: boolean;
  holidays?: string[];
  schedules?: Schedule[];
  access_24h?: boolean;
  closed_days?: string[];
  restrictions?: string[];
  operating_days?: string[];
  original_hours?: string;
}
```

### 4.5 NearbyFacilityï¼ˆå‘¨è¾ºæ–½è¨­ï¼‰
```typescript
interface NearbyFacility {
  id: string;
  name?: string;
  distance?: number;
  distance_m?: number;
}
```

### 4.6 ConvenienceStoreï¼ˆã‚³ãƒ³ãƒ“ãƒ‹ï¼‰
```typescript
interface ConvenienceStore extends Spot {
  idString: string;
  brand?: string;  // "Seven-Eleven", "Lawson", "FamilyMart"ç­‰
  subType?: string;
  phoneNumber?: string;
  operatingHours?: string;
}
```

### 4.7 HotSpringï¼ˆæ¸©æ³‰ï¼‰
```typescript
interface HotSpring extends Spot {
  price?: string;
  operatingHours?: string;
  holidayInfo?: string;
  facilityType?: string;
}
```

### 4.8 GasStationï¼ˆã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰ï¼‰
```typescript
interface GasStation extends Spot {
  brand?: string;
  services?: {
    regular_price?: number;
    premium_price?: number;
    diesel_price?: number;
    last_updated?: string;
  };
  operatingHours?: string;
}
```

### 4.9 Festivalï¼ˆãŠç¥­ã‚Šï¼‰
```typescript
interface Festival extends Spot {
  eventDate?: string;
  eventType?: string;
}
```

### 4.10 SearchFilterï¼ˆæ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ï¼‰
```typescript
interface SearchFilter {
  selectedCategories: Set<string>;
  searchRadius: number;
  minElevation: number;
  parkingTimeFilterEnabled: boolean;
  radiusFilterEnabled: boolean;
  elevationFilterEnabled: boolean;
  nearbyCategories: Set<string>;
  convenienceStoreRadius: number;
  toiletRadius: number;
  hotSpringRadius: number;
  showFlatParking: boolean;         // å¹³é¢é§è»Šå ´
  showMultiStoryParking: boolean;   // ç«‹ä½“é§è»Šå ´
  showMechanicalParking: boolean;   // æ©Ÿæ¢°å¼é§è»Šå ´
  parkingDuration: ParkingDuration;
  nearbyFilterEnabled?: boolean;
  nearbyRadius?: number;
  nearbyCategory?: 'convenience' | 'hotspring';
}
```

### 4.11 Regionï¼ˆåœ°å›³ç¯„å›²ï¼‰
```typescript
interface Region {
  latitude: number;
  longitude: number;
  latitudeDelta: number;
  longitudeDelta: number;
}
```

### 4.12 ã‚«ãƒ†ã‚´ãƒªå®šæ•°
```typescript
const CATEGORIES = {
  PARKING: 'ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°',
  CONVENIENCE: 'ã‚³ãƒ³ãƒ“ãƒ‹',
  HOT_SPRING: 'æ¸©æ³‰',
  FESTIVAL: 'ãŠç¥­ã‚Šãƒ»èŠ±ç«å¤§ä¼š',
  GAS_STATION: 'ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰',
} as const;

const CATEGORY_EMOJIS = {
  'ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°': 'ğŸ…¿ï¸',
  'ã‚³ãƒ³ãƒ“ãƒ‹': 'ğŸª',
  'æ¸©æ³‰': 'â™¨ï¸',
  'ãŠç¥­ã‚Šãƒ»èŠ±ç«å¤§ä¼š': 'ğŸ†',
  'ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰': 'â›½',
};
```

---

## 5. ç”»é¢ä¸€è¦§ã¨è©³ç´°æ©Ÿèƒ½

### 5.1 ãƒ¡ã‚¤ãƒ³ç”»é¢

#### MapScreenï¼ˆåœ°å›³ç”»é¢ï¼‰
**å½¹å‰²**: ã‚¢ãƒ—ãƒªã®ãƒ¡ã‚¤ãƒ³ç”»é¢ã€‚åœ°å›³ä¸Šã«æ–½è¨­ã‚’è¡¨ç¤ºã—ã€æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã‚’è¡Œã†ã€‚

**ä¸»è¦æ©Ÿèƒ½**:
1. **åœ°å›³è¡¨ç¤º**
   - iOS: Apple Maps
   - Android: Google Maps
   - Web: Leaflet (OpenStreetMap)
   - åˆå›èµ·å‹•æ™‚: å‰å›é–‰ã˜ãŸä½ç½®ã‚’è¡¨ç¤º â†’ ç¾åœ¨åœ°å–å¾—å¾Œã«ç§»å‹•
   - GPSä½ç½®å–å¾—å¤±æ•—æ™‚: å‰å›ã®ä½ç½®ã‚’ç¶™ç¶šä½¿ç”¨
   - ä¿å­˜ä½ç½®ã‚‚ãªã„å ´åˆã®ã¿: æ±äº¬é§…ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤º

2. **ãƒãƒ¼ã‚«ãƒ¼è¡¨ç¤º**
   - é§è»Šå ´: æ–™é‡‘ãƒ©ãƒ³ã‚­ãƒ³ã‚°1ä½ï½3ä½ã¯é‡‘ãƒ»éŠ€ãƒ»éŠ…ã®ãƒ¡ãƒ€ãƒ«ãƒãƒ¼ã‚«ãƒ¼
   - é§è»Šå ´: 4ä½ä»¥é™ã¯é’ã„ç•ªå·ãƒãƒ¼ã‚«ãƒ¼ï¼ˆæ–™é‡‘é †ä½ï¼‰
   - ã‚³ãƒ³ãƒ“ãƒ‹: ğŸª ã‚¢ã‚¤ã‚³ãƒ³
   - æ¸©æ³‰: â™¨ï¸ ã‚¢ã‚¤ã‚³ãƒ³
   - ãŠç¥­ã‚Š: ğŸ† ã‚¢ã‚¤ã‚³ãƒ³
   - ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰: â›½ ã‚¢ã‚¤ã‚³ãƒ³
   - ç¾åœ¨åœ°: é’ã„å††ãƒãƒ¼ã‚«ãƒ¼
   - é¸æŠä¸­ã®ãƒãƒ¼ã‚«ãƒ¼: 1.3å€ã«ã‚¹ã‚±ãƒ¼ãƒ« + èµ¤æ 

3. **ãƒãƒ¼ã‚«ãƒ¼ã‚¿ãƒƒãƒ—å‹•ä½œ**
   - 1å›ç›®ã‚¿ãƒƒãƒ—: ã‚³ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆè¡¨ç¤ºï¼ˆåå‰ã¨ç°¡å˜ãªæƒ…å ±ï¼‰
   - 2å›ç›®ã‚¿ãƒƒãƒ—: è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆè¡¨ç¤º

4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**
   - é§è»Šå ´ã¯æ–™é‡‘é †ã«ä¸Šä½20ä»¶ã®ã¿è¡¨ç¤º
   - 300ä»¶ã‚’è¶…ãˆã‚‹å ´åˆ: è­¦å‘Šã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
   - ãƒãƒ¼ã‚«ãƒ¼ã¯ `tracksViewChanges={false}` ã§æœ€é©åŒ–

5. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¿½è·¡**
   - ç¾åœ¨åœ°ãƒœã‚¿ãƒ³ï¼ˆå³ä¸‹ã®é’ã„ãƒœã‚¿ãƒ³ï¼‰ã‚¿ãƒƒãƒ—ã§ON/OFF
   - 2ç§’ã”ã¨ or 10mç§»å‹•ã”ã¨ã«æ›´æ–°
   - é«˜ç²¾åº¦GPSä½¿ç”¨

6. **æ¤œç´¢ã‚¨ãƒªã‚¢èª¿æ•´**
   - UIè¦ç´ ï¼ˆä¸Šéƒ¨ãƒ»ä¸‹éƒ¨ãƒ‘ãƒãƒ«ï¼‰ã‚’è€ƒæ…®ã—ãŸæ¤œç´¢ç¯„å›²
   - ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆè¡¨ç¤ºæ™‚ã¯ä¸Šéƒ¨50%ã®ã¿ã‚’æ¤œç´¢ç¯„å›²ã«

**ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
- `CategoryButtons`: ã‚«ãƒ†ã‚´ãƒªé¸æŠãƒœã‚¿ãƒ³ï¼ˆé§è»Šå ´ã€ã‚³ãƒ³ãƒ“ãƒ‹ã€æ¸©æ³‰ç­‰ï¼‰
- `CompactBottomPanel`: ãƒ•ã‚£ãƒ«ã‚¿ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
- `RankingListModal`: ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«
- `SpotDetailBottomSheet`: è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ
- `MapScale`: ç¸®å°ºãƒãƒ¼

**çŠ¶æ…‹ç®¡ç†**:
```typescript
// ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹
const [mapRegion, setMapRegion] = useState<Region>();
const [isMapReady, setIsMapReady] = useState(false);
const [showRankingModal, setShowRankingModal] = useState(false);
const [showDetailSheet, setShowDetailSheet] = useState(false);
const [isLocationTracking, setIsLocationTracking] = useState(false);
const [locationStatus, setLocationStatus] = useState<'loading' | 'success' | 'error' | 'denied'>('loading');
const [toastMessage, setToastMessage] = useState<string | null>(null);
const [isInitializingMap, setIsInitializingMap] = useState(true);

// ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ (Zustand)
const {
  searchResults,
  selectedSpot,
  searchFilter,
  setSearchResults,
  selectSpot,
} = useMainStore();
```

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/MapScreen.tsx` (2,700è¡Œ+)

---

#### CompactBottomPanelï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒãƒ«ï¼‰
**å½¹å‰²**: åœ°å›³ä¸‹éƒ¨ã®æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

**ä¸»è¦æ©Ÿèƒ½**:
1. **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ**
   - é§è»Šæ–™é‡‘ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
   - å‘¨è¾ºæ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹ãƒ»æ¸©æ³‰ãƒ»ãƒˆã‚¤ãƒ¬ï¼‰
   - æ¨™é«˜ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆ0ï½2000mã€å¯¾æ•°ã‚¹ã‚±ãƒ¼ãƒ«ï¼‰

2. **é§è»Šæ–™é‡‘ãƒ•ã‚£ãƒ«ã‚¿**
   - å…¥åº«æ—¥æ™‚é¸æŠ
   - å‡ºåº«æ—¥æ™‚é¸æŠ
   - é§è»Šæ™‚é–“è¡¨ç¤ºï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
   - é§è»Šå ´ã‚¿ã‚¤ãƒ—é¸æŠï¼ˆå¹³é¢ã€ç«‹ä½“ã€æ©Ÿæ¢°å¼ï¼‰

3. **å‘¨è¾ºæ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿**
   - ã‚³ãƒ³ãƒ“ãƒ‹ã¾ã§ã®è·é›¢ï¼ˆ0ï½1000mï¼‰
   - æ¸©æ³‰ã¾ã§ã®è·é›¢ï¼ˆ0ï½10kmï¼‰
   - ãƒˆã‚¤ãƒ¬ã¾ã§ã®è·é›¢ï¼ˆ0ï½1000mï¼‰
   - ORæ¤œç´¢: ã„ãšã‚Œã‹ã®æ–½è¨­ãŒç¯„å›²å†…ã«ã‚ã‚Œã°è¡¨ç¤º

4. **æ¨™é«˜ãƒ•ã‚£ãƒ«ã‚¿**
   - ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§æœ€ä½æ¨™é«˜ã‚’è¨­å®š
   - æ¸©åº¦è¨ˆç®—: -0.6Â°C/100m
   - æ´¥æ³¢ãƒãƒ¼ã‚«ãƒ¼: 30måœ°ç‚¹

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/components/CompactBottomPanel.tsx`

---

#### CategoryButtonsï¼ˆã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ï¼‰
**å½¹å‰²**: æ–½è¨­ã‚«ãƒ†ã‚´ãƒªã®é¸æŠ

**è¡¨ç¤ºã‚«ãƒ†ã‚´ãƒª**:
- ğŸ…¿ï¸ é§è»Šå ´ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠï¼‰
- ğŸª ã‚³ãƒ³ãƒ“ãƒ‹
- ğŸ´ ãƒˆã‚¤ãƒ¬
- â›½ æ¸©æ³‰

**å‹•ä½œ**:
- è¤‡æ•°é¸æŠå¯èƒ½
- é¸æŠæ™‚ã¯é’èƒŒæ™¯ã€æœªé¸æŠæ™‚ã¯ç™½èƒŒæ™¯
- é¸æŠå¤‰æ›´æ™‚ã«è‡ªå‹•ã§åœ°å›³ã‚’å†æ¤œç´¢

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/components/CategoryButtons.tsx`

---

#### RankingListModalï¼ˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
**å½¹å‰²**: é§è»Šæ–™é‡‘ãŒå®‰ã„é †ã«ä¸Šä½20ä»¶ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º

**ä¸»è¦æ©Ÿèƒ½**:
1. **ãƒªã‚¹ãƒˆè¡¨ç¤º**
   - 1ä½ï½3ä½: é‡‘ãƒ»éŠ€ãƒ»éŠ…ã®ãƒ¡ãƒ€ãƒ«è¡¨ç¤º
   - 4ä½ï½20ä½: é †ä½ç•ªå·
   - é§è»Šå ´åã€ä½æ‰€ã€æ–™é‡‘ã‚’è¡¨ç¤º

2. **ã‚¿ãƒƒãƒ—å‹•ä½œ**
   - 1å›ç›®ã‚¿ãƒƒãƒ—: åœ°å›³ä¸­å¤®ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’ç§»å‹•
   - 2å›ç›®ã‚¿ãƒƒãƒ—: è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆè¡¨ç¤ºï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã¦ã‹ã‚‰è¡¨ç¤ºï¼‰

3. **ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ãƒƒã‚¯åˆ¶é™å¯¾å¿œ**
   - React Nativeã®åˆ¶é™ã§è¤‡æ•°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é‡ã­ã‚‰ã‚Œãªã„
   - ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã¦ã‹ã‚‰è©³ç´°ã‚·ãƒ¼ãƒˆã‚’é–‹ã
   - `setTimeout`ã§æ»‘ã‚‰ã‹ãªé·ç§»

**è¡¨ç¤ºé«˜ã•**: ç”»é¢ã®50%

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/RankingListModal.tsx`

---

#### SpotDetailBottomSheetï¼ˆè©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆï¼‰
**å½¹å‰²**: æ–½è¨­ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤º

**è¡¨ç¤ºå†…å®¹ï¼ˆé§è»Šå ´ï¼‰**:
1. **åŸºæœ¬æƒ…å ±**
   - é§è»Šå ´å
   - ä½æ‰€
   - æ–™é‡‘è¡¨ç¤ºï¼ˆè¨ˆç®—æ¸ˆã¿æ–™é‡‘ï¼‰
   - é§è»Šå ´ã‚¿ã‚¤ãƒ—ï¼ˆå¹³é¢ã€ç«‹ä½“ã€æ©Ÿæ¢°å¼ã€è»Šä¸­æ³Šãƒ»ã‚­ãƒ£ãƒ³ãƒ—å ´ï¼‰
   - å–¶æ¥­æ™‚é–“

2. **æ–™é‡‘è©³ç´°**
   - æ–™é‡‘æ§‹é€ ï¼ˆåŸºæœ¬æ–™é‡‘ã€ç´¯é€²æ–™é‡‘ã€æœ€å¤§æ–™é‡‘ï¼‰
   - æ™‚é–“å¸¯åˆ¥æ–™é‡‘
   - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹: "30åˆ†æœªæº€ç„¡æ–™ã€30åˆ†ä»¥é™å…¥åº«ã‹ã‚‰30åˆ†æ¯Â¥250"

3. **å‘¨è¾ºæ–½è¨­æƒ…å ±**
   - æœ€å¯„ã‚Šã®ã‚³ãƒ³ãƒ“ãƒ‹ï¼ˆè·é›¢ã€ãƒ–ãƒ©ãƒ³ãƒ‰ï¼‰
   - æœ€å¯„ã‚Šã®æ¸©æ³‰ï¼ˆè·é›¢ï¼‰
   - æœ€å¯„ã‚Šã®ãƒˆã‚¤ãƒ¬ï¼ˆè·é›¢ï¼‰

4. **ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**
   - Google Mapsã§é–‹ã
   - ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ /å‰Šé™¤ï¼ˆè¦ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚‹
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ï¼ˆè¦ãƒ­ã‚°ã‚¤ãƒ³ï¼‰

**è¡¨ç¤ºå†…å®¹ï¼ˆæ¸©æ³‰ï¼‰**:
- æ¸©æ³‰å
- ä½æ‰€
- æ–™é‡‘
- å–¶æ¥­æ™‚é–“
- ãƒ¬ãƒ“ãƒ¥ãƒ¼

**è¡¨ç¤ºå†…å®¹ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹ï¼‰**:
- åº—å
- ãƒ–ãƒ©ãƒ³ãƒ‰
- ä½æ‰€
- å–¶æ¥­æ™‚é–“

**è¡¨ç¤ºé«˜ã•**: ç”»é¢ã®45%

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/SpotDetailBottomSheet.tsx`

---

### 5.2 èªè¨¼ç”»é¢

#### LoginScreenï¼ˆãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³
- Google OAuthãƒ­ã‚°ã‚¤ãƒ³
- ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚ŒãŸã€ãƒªãƒ³ã‚¯
- ã€Œæ–°è¦ç™»éŒ²ã€ãƒªãƒ³ã‚¯

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ãƒã‚§ãƒƒã‚¯
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¿…é ˆãƒã‚§ãƒƒã‚¯

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/auth/LoginScreen.tsx`

---

#### SignUpScreenï¼ˆæ–°è¦ç™»éŒ²ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§æ–°è¦ç™»éŒ²
- è¡¨ç¤ºåï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼‰å…¥åŠ›
- åˆ©ç”¨è¦ç´„ã¸ã®åŒæ„ãƒã‚§ãƒƒã‚¯

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: 6æ–‡å­—ä»¥ä¸Š
- è¡¨ç¤ºå: å¿…é ˆ

**ç™»éŒ²ãƒ•ãƒ­ãƒ¼**:
1. Supabase Authã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
2. `user_profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆï¼ˆUPSERT ã§é‡è¤‡å›é¿ï¼‰
3. è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/auth/SignUpScreen.tsx`

---

#### ForgotPasswordScreenï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/auth/ForgotPasswordScreen.tsx`

---

#### TermsOfServiceScreenï¼ˆåˆ©ç”¨è¦ç´„ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- åˆ©ç”¨è¦ç´„ã®è¡¨ç¤º

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/auth/TermsOfServiceScreen.tsx`

---

### 5.3 ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”»é¢

#### ProfileScreenï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±è¡¨ç¤ºï¼ˆè¡¨ç¤ºåã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼‰
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†
- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/ProfileScreen.tsx`

---

#### FavoritesScreenï¼ˆãŠæ°—ã«å…¥ã‚Šç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã—ãŸé§è»Šå ´ã®ãƒªã‚¹ãƒˆè¡¨ç¤º
- ã‚¿ãƒƒãƒ—ã§åœ°å›³ã«ç§»å‹•ã—ã¦è©³ç´°è¡¨ç¤º
- ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤

**ãƒ‡ãƒ¼ã‚¿å–å¾—**:
- `favorites` ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ user_id ã§çµã‚Šè¾¼ã¿
- `parking_spots` ã¨ JOIN ã—ã¦è©³ç´°æƒ…å ±å–å¾—

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/FavoritesScreen.tsx`

---

#### MyReviewsScreenï¼ˆãƒã‚¤ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- è‡ªåˆ†ãŒæŠ•ç¨¿ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚¹ãƒˆè¡¨ç¤º
- é§è»Šå ´ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ¸©æ³‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆ†ã‘ã¦è¡¨ç¤º
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·¨é›†ãƒ»å‰Šé™¤

**ãƒ‡ãƒ¼ã‚¿å–å¾—**:
- `parking_reviews` ã¨ `hot_spring_reviews` ã‹ã‚‰ user_id ã§çµã‚Šè¾¼ã¿

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/MyReviewsScreen.tsx`

---

### 5.4 è¨­å®šãƒ»æƒ…å ±ç”»é¢

#### SettingsScreenï¼ˆè¨­å®šç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ã‚¢ãƒ—ãƒªè¨­å®š
- é€šçŸ¥è¨­å®š
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/SettingsScreen.tsx`

---

#### HelpScreenï¼ˆãƒ˜ãƒ«ãƒ—ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰
- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰
- ãŠå•ã„åˆã‚ã›

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/HelpScreen.tsx`

---

#### AboutScreenï¼ˆã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ã‚¢ãƒ—ãƒªæƒ…å ±
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
- é–‹ç™ºè€…æƒ…å ±

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/AboutScreen.tsx`

---

#### GuideScreenï¼ˆã‚¬ã‚¤ãƒ‰ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
- æ©Ÿèƒ½èª¬æ˜

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/GuideScreen.tsx`

---

#### TermsScreenï¼ˆåˆ©ç”¨è¦ç´„ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- åˆ©ç”¨è¦ç´„ã®å…¨æ–‡è¡¨ç¤º

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/TermsScreen.tsx`

---

#### PrivacyScreenï¼ˆãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®å…¨æ–‡è¡¨ç¤º

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/PrivacyScreen.tsx`

---

#### PremiumScreenï¼ˆãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ç”»é¢ï¼‰
**æ©Ÿèƒ½**:
- å°†æ¥ã®æœ‰æ–™æ©Ÿèƒ½ã®èª¬æ˜
- ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³è³¼å…¥

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/PremiumScreen.tsx`

---

### 5.5 ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿æ©Ÿèƒ½

#### AddParkingScreenï¼ˆé§è»Šå ´æŠ•ç¨¿ç”»é¢ï¼‰
**å½¹å‰²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé§è»Šå ´ã®çœ‹æ¿å†™çœŸã‚’æ’®å½±ãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦æ–°ã—ã„é§è»Šå ´æƒ…å ±ã‚’æŠ•ç¨¿

**ä¸»è¦æ©Ÿèƒ½**:
1. **å†™çœŸæ’®å½±/é¸æŠ**
   - ã‚«ãƒ¡ãƒ©ã§æ’®å½±
   - ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã‹ã‚‰é¸æŠ
   - ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”åˆ¶é™ãªã—ï¼ˆè‡ªç”±ãªã‚µã‚¤ã‚ºï¼‰

2. **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**
   - Supabase Storage ã® `parking-submissions` ãƒã‚±ãƒƒãƒˆã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒ•ã‚¡ã‚¤ãƒ«å: `{userId}/{timestamp}.jpg`

3. **è‡ªå‹•OCRå‡¦ç†**
   - Edge Function `process-parking-image` ãŒè‡ªå‹•ãƒˆãƒªã‚¬ãƒ¼
   - Gemini 2.5 Flash API ã§çœ‹æ¿ã‚’OCR
   - æ–™é‡‘æ§‹é€ ã‚’æ­£è¦åŒ–ã—ã¦JSONåŒ–
   - ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0.0ï½1.0ï¼‰ã‚’è¨ˆç®—

4. **æŠ•ç¨¿å®Œäº†**
   - `parking_submissions` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: `pending`ï¼ˆæ‰¿èªå¾…ã¡ï¼‰

**OCRæŠ½å‡ºãƒ‡ãƒ¼ã‚¿ä¾‹**:
```json
{
  "name": "ã‚¿ã‚¤ãƒ ã‚ºæ¸‹è°·é§…å‰",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·1-1-1",
  "latitude": 35.658581,
  "longitude": 139.701439,
  "capacity": 50,
  "rates": [
    { "type": "base", "minutes": 30, "price": 0 },
    { "type": "progressive", "minutes": 30, "price": 250, "apply_after": 30 },
    { "type": "max", "minutes": 1440, "price": 2400 }
  ],
  "hours": {
    "is_24h": true
  },
  "nearest_convenience_store": {
    "id": "12345",
    "name": "ã‚»ãƒ–ãƒ³-ã‚¤ãƒ¬ãƒ–ãƒ³ æ¸‹è°·é§…å‰åº—",
    "distance": 120
  },
  "nearest_hot_spring": {
    "id": "456",
    "name": "æ¸‹æ¸©æ³‰",
    "distance": 2500
  }
}
```

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/AddParkingScreen.tsx`

---

#### AdminSubmissionsScreenï¼ˆæŠ•ç¨¿ç®¡ç†ç”»é¢ï¼‰
**å½¹å‰²**: ç®¡ç†è€…ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿ã‚’æ‰¿èªãƒ»å´ä¸‹ãƒ»ç·¨é›†ã™ã‚‹

**ä¸»è¦æ©Ÿèƒ½**:
1. **æŠ•ç¨¿ãƒªã‚¹ãƒˆè¡¨ç¤º**
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆpending, approved, rejectedï¼‰
   - ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã§ä¸¦ã³æ›¿ãˆ
   - ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒè¡¨ç¤º

2. **æŠ•ç¨¿è©³ç´°è¡¨ç¤º**
   - å…ƒã®å†™çœŸã‚’æ‹¡å¤§è¡¨ç¤º
   - OCRæŠ½å‡ºãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¡¨ç¤º
   - æŠ•ç¨¿è€…æƒ…å ±

3. **JSONç›´æ¥ç·¨é›†**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚¨ãƒ©ãƒ¼æ¤œå‡º
   - æ–™é‡‘æ§‹é€ ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯

4. **é‡è¤‡ãƒã‚§ãƒƒã‚¯**
   - åŒã˜åº§æ¨™ï¼ˆlat, lngï¼‰ã®é§è»Šå ´ã‚’æ¤œå‡º
   - åŒã˜åå‰ã®é§è»Šå ´ã‚’æ¤œå‡º
   - é‡è¤‡æ™‚ã¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
     - [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] ãƒœã‚¿ãƒ³: æ‰¿èªã‚’ä¸­æ­¢
     - [OK] ãƒœã‚¿ãƒ³: æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ï¼ˆç”»åƒã‚’è¿½åŠ ï¼‰
     - [æ–°è¦ç™»éŒ²] ãƒœã‚¿ãƒ³ï¼ˆåå‰é‡è¤‡ã®ã¿ï¼‰: åˆ¥ã®é§è»Šå ´ã¨ã—ã¦ç™»éŒ²

5. **æ‰¿èªå‡¦ç†**
   - `parking_spots` ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ–°è¦æŒ¿å…¥
   - ã¾ãŸã¯æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
   - å‘¨è¾ºæ–½è¨­ãƒ‡ãƒ¼ã‚¿ã‚‚ä¿å­˜
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ `approved` ã«å¤‰æ›´

6. **å´ä¸‹å‡¦ç†**
   - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ `rejected` ã«å¤‰æ›´
   - ç”»åƒã¯ä¿æŒï¼ˆå†å¯©æŸ»å¯èƒ½ï¼‰

**ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°**:
- ã‚³ãƒ³ãƒ“ãƒ‹ãƒ‡ãƒ¼ã‚¿: `nearest_convenience_store` ã¨ `nearestConvenienceStore` ã®ä¸¡æ–¹ã‚’ãƒã‚§ãƒƒã‚¯
- æ¸©æ³‰ãƒ‡ãƒ¼ã‚¿: `nearest_hot_spring` ã¨ `nearest_hotspring` ã®ä¸¡æ–¹ã‚’ãƒã‚§ãƒƒã‚¯
- OCRã® key naming ã®ä¸ä¸€è‡´ã«å¯¾å¿œ

**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/screens/AdminSubmissionsScreen.tsx`

---

### 5.6 ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ç”»é¢

#### TestAuthï¼ˆèªè¨¼ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: èªè¨¼ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

#### TestMapBoundsï¼ˆåœ°å›³ç¯„å›²ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: åœ°å›³ã®ç¯„å›²è¨ˆç®—ãƒ†ã‚¹ãƒˆ

#### TestDataFetchï¼ˆãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: Supabaseã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆ

#### DebugSupabaseï¼ˆSupabase ãƒ‡ãƒãƒƒã‚°ç”»é¢ï¼‰
**æ©Ÿèƒ½**: ç›´æ¥SQLã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ãƒ‡ãƒãƒƒã‚°

#### TestOperatingHoursï¼ˆå–¶æ¥­æ™‚é–“ãƒ‘ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: å–¶æ¥­æ™‚é–“ã®è§£æãƒ†ã‚¹ãƒˆ

#### TestNearbyDataï¼ˆå‘¨è¾ºãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: å‘¨è¾ºæ–½è¨­æ¤œç´¢ã®ãƒ†ã‚¹ãƒˆ

#### TestParkingFeeAdvancedï¼ˆæ–™é‡‘è¨ˆç®—ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: è¤‡é›‘ãªæ–™é‡‘ä½“ç³»ã®è¨ˆç®—ãƒ†ã‚¹ãƒˆ

#### TestParkingTypeï¼ˆé§è»Šå ´ã‚¿ã‚¤ãƒ—ãƒ†ã‚¹ãƒˆç”»é¢ï¼‰
**æ©Ÿèƒ½**: é§è»Šå ´ã‚¿ã‚¤ãƒ—åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ã®ãƒ†ã‚¹ãƒˆ

---

## 6. ã‚µãƒ¼ãƒ“ã‚¹å±¤

### 6.1 SupabaseServiceï¼ˆãƒ‡ãƒ¼ã‚¿å–å¾—ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/supabase.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class SupabaseService {
  // é§è»Šå ´æ¤œç´¢
  static async searchParkingSpots(
    region: Region,
    filter: SearchFilter
  ): Promise<CoinParking[]>

  // RPC: æ–™é‡‘é †ã‚½ãƒ¼ãƒˆæ¸ˆã¿é§è»Šå ´å–å¾—ï¼ˆã‚µãƒ¼ãƒãƒ¼å´ã§æ–™é‡‘è¨ˆç®—ï¼‰
  static async getParkingSpotsSortedByFee(
    region: Region,
    durationMinutes: number,
    parkingStart: Date
  ): Promise<{ spots: CoinParking[], totalCount: number }>

  // ã‚³ãƒ³ãƒ“ãƒ‹æ¤œç´¢
  static async searchConvenienceStores(
    region: Region
  ): Promise<ConvenienceStore[]>

  // æ¸©æ³‰æ¤œç´¢
  static async searchHotSprings(
    region: Region
  ): Promise<HotSpring[]>

  // ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰æ¤œç´¢
  static async searchGasStations(
    region: Region
  ): Promise<GasStation[]>

  // ãŠç¥­ã‚Šæ¤œç´¢
  static async searchFestivals(
    region: Region
  ): Promise<Festival[]>

  // é§è»Šå ´è©³ç´°å–å¾—
  static async getParkingSpotById(
    id: string
  ): Promise<CoinParking | null>

  // æ¸©æ³‰è©³ç´°å–å¾—
  static async getHotSpringById(
    id: string
  ): Promise<HotSpring | null>

  // ã‚³ãƒ³ãƒ“ãƒ‹è©³ç´°å–å¾—
  static async getConvenienceStoreById(
    id: string
  ): Promise<ConvenienceStore | null>
}
```

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒªä¾‹**:
```typescript
// é§è»Šå ´æ¤œç´¢ï¼ˆæ–™é‡‘é †ï¼‰
const { data, error } = await supabase.rpc('get_parking_spots_sorted_by_fee', {
  min_lat: region.latitude - region.latitudeDelta / 2,
  max_lat: region.latitude + region.latitudeDelta / 2,
  min_lng: region.longitude - region.longitudeDelta / 2,
  max_lng: region.longitude + region.longitudeDelta / 2,
  duration_minutes: durationMinutes,
  parking_start: parkingStart.toISOString(),
});
```

---

### 6.2 SearchServiceï¼ˆæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/search.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class SearchService {
  // çµ±åˆæ¤œç´¢ï¼ˆå…¨ã‚«ãƒ†ã‚´ãƒªï¼‰
  static async search(
    region: Region,
    filter: SearchFilter,
    parkingStart?: Date,
    durationMinutes?: number
  ): Promise<{
    results: Spot[];
    stats: {
      parking: number;
      convenience: number;
      hotspring: number;
      gasStation: number;
      festival: number;
    };
  }>

  // ãƒ•ã‚£ãƒ«ã‚¿é©ç”¨
  static applyFilters(
    spots: Spot[],
    filter: SearchFilter
  ): Spot[]

  // å‘¨è¾ºæ–½è¨­ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆORæ¤œç´¢ï¼‰
  static filterByNearbyFacilities(
    parkingSpots: CoinParking[],
    filter: SearchFilter
  ): CoinParking[]

  // æ¨™é«˜ãƒ•ã‚£ãƒ«ã‚¿
  static filterByElevation(
    spots: Spot[],
    minElevation: number
  ): Spot[]

  // é§è»Šå ´ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿
  static filterByParkingType(
    parkingSpots: CoinParking[],
    filter: SearchFilter
  ): CoinParking[]
}
```

**ãƒ•ã‚£ãƒ«ã‚¿ãƒ­ã‚¸ãƒƒã‚¯**:
1. ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿
2. æ¨™é«˜ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆæœ€ä½æ¨™é«˜ä»¥ä¸Šï¼‰
3. å‘¨è¾ºæ–½è¨­ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆORæ¤œç´¢ï¼‰
4. é§è»Šå ´ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆå¹³é¢ã€ç«‹ä½“ã€æ©Ÿæ¢°å¼ï¼‰
5. é§è»Šæ–™é‡‘è¨ˆç®—ï¼ˆæŒ‡å®šæ™‚é–“ï¼‰
6. æ–™é‡‘é †ã‚½ãƒ¼ãƒˆï¼ˆé§è»Šå ´ã®ã¿ï¼‰

---

### 6.3 ParkingFeeCalculatorï¼ˆé§è»Šæ–™é‡‘è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/parking-fee.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class ParkingFeeCalculator {
  // é§è»Šæ–™é‡‘è¨ˆç®—ï¼ˆãƒ¡ã‚¤ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰
  static calculateFee(
    rates: ParkingRate[],
    durationMinutes: number,
    parkingStart?: Date
  ): number

  // æ–™é‡‘æƒ…å ±ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  static formatFeeInfo(
    rates: ParkingRate[]
  ): string

  // å–¶æ¥­æ™‚é–“ãƒã‚§ãƒƒã‚¯
  static isOpenDuringParking(
    hours: HoursInfo,
    parkingStart: Date,
    durationMinutes: number
  ): boolean

  // å–¶æ¥­çŠ¶æ…‹ã®æ–‡å­—åˆ—ç”Ÿæˆ
  static getOperatingStatus(
    hours: HoursInfo,
    parkingStart: Date
  ): string
}
```

**è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **:
1. **æ–™é‡‘ã®æ­£è¦åŒ–**: snake_case â†’ camelCase
2. **æ™‚é–“å¸¯åˆ†å‰²**: é§è»Šæ™‚é–“ã‚’æ™‚é–“å¸¯ã”ã¨ã«åˆ†å‰²
3. **ç´¯é€²æ–™é‡‘ã®é©ç”¨**: `applyAfter` ã‚’è€ƒæ…®
4. **æœ€å¤§æ–™é‡‘ã®é©ç”¨**: æ™‚é–“æ å†…ã§ã®ä¸Šé™
5. **24æ™‚é–“è¶…ã®æ™‚åˆ»å¯¾å¿œ**: "25:30" â†’ "01:30" ã«æ­£è¦åŒ–

**æ–™é‡‘è¨ˆç®—ä¾‹**:
```typescript
// æ–™é‡‘æ§‹é€ 
rates = [
  { type: 'base', minutes: 30, price: 0 },
  { type: 'progressive', minutes: 30, price: 250, applyAfter: 30 },
  { type: 'max', minutes: 1440, price: 2400 }
];

// 2æ™‚é–“é§è»Šï¼ˆ120åˆ†ï¼‰
fee = calculateFee(rates, 120);
// â†’ 750å††
// è¨ˆç®—: æœ€åˆ30åˆ†0å†† + æ®‹ã‚Š90åˆ†(3Ã—30åˆ†)Ã—250å†† = 750å††
```

---

### 6.4 LocationServiceï¼ˆä½ç½®æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/location.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class LocationService {
  // ä½ç½®æƒ…å ±æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  static async requestPermission(): Promise<'granted' | 'denied' | 'restricted'>

  // ç¾åœ¨åœ°å–å¾—ï¼ˆ1å›ï¼‰
  static async getCurrentLocation(): Promise<Location | null>

  // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¿½è·¡
  static async watchLocation(
    callback: (location: Location) => void,
    options?: LocationTaskOptions
  ): Promise<LocationSubscription>

  // ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä½æ‰€ â†’ åº§æ¨™ï¼‰
  static async geocode(
    query: string
  ): Promise<{ latitude: number; longitude: number } | null>

  // è·é›¢è¨ˆç®—ï¼ˆHaversineå¼ï¼‰
  static calculateDistance(
    from: Location,
    to: { lat: number; lng: number }
  ): number

  // è·é›¢ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
  static formatDistance(
    meters: number
  ): string  // "120m" or "1.5km"
}
```

**ä½ç½®æƒ…å ±è¨­å®š**:
```typescript
{
  accuracy: Location.Accuracy.High,
  maximumAge: 10000,  // 10ç§’ä»¥å†…ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ç”¨
  timeout: 15000,     // 15ç§’ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
}
```

**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¿½è·¡è¨­å®š**:
```typescript
{
  accuracy: Location.Accuracy.High,
  timeInterval: 2000,       // 2ç§’ã”ã¨
  distanceInterval: 10,     // 10mç§»å‹•ã”ã¨
}
```

---

### 6.5 AuthServiceï¼ˆèªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/auth.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class AuthService {
  // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç™»éŒ²
  static async signUp(
    email: string,
    password: string,
    displayName: string
  ): Promise<{ user: User; error: Error | null }>

  // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ­ã‚°ã‚¤ãƒ³
  static async signIn(
    email: string,
    password: string
  ): Promise<{ user: User; error: Error | null }>

  // Google OAuthãƒ­ã‚°ã‚¤ãƒ³
  static async signInWithGoogle(): Promise<{ user: User; error: Error | null }>

  // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
  static async signOut(): Promise<void>

  // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
  static async resetPassword(
    email: string
  ): Promise<{ error: Error | null }>

  // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆï¼ˆé‡è¤‡ãƒã‚§ãƒƒã‚¯ä»˜ãï¼‰
  static async createProfileSafely(
    userId: string,
    displayName: string
  ): Promise<{ error: Error | null }>

  // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼
  static async validateSession(): Promise<boolean>
}
```

**èªè¨¼ãƒ•ãƒ­ãƒ¼**:
1. `signUp` or `signIn` â†’ Supabase Auth
2. `createProfileSafely` â†’ `user_profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆUPSERTï¼‰
3. `useAuthStore` ã«çŠ¶æ…‹ã‚’ä¿å­˜
4. AsyncStorage ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒ

---

### 6.6 ReviewServiceï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/review.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class ReviewService {
  // ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ï¼ˆé§è»Šå ´ï¼‰
  static async createParkingReview(
    parkingSpotId: string,
    userId: string,
    content: string,
    rating: number
  ): Promise<{ error: Error | null }>

  // ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ï¼ˆæ¸©æ³‰ï¼‰
  static async createHotSpringReview(
    hotSpringId: string,
    userId: string,
    content: string,
    rating: number
  ): Promise<{ error: Error | null }>

  // ãƒ¬ãƒ“ãƒ¥ãƒ¼å–å¾—ï¼ˆé§è»Šå ´ï¼‰
  static async getParkingReviews(
    parkingSpotId: string
  ): Promise<Review[]>

  // ãƒ¬ãƒ“ãƒ¥ãƒ¼å–å¾—ï¼ˆæ¸©æ³‰ï¼‰
  static async getHotSpringReviews(
    hotSpringId: string
  ): Promise<Review[]>

  // ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤
  static async deleteReview(
    reviewId: string,
    userId: string
  ): Promise<{ error: Error | null }>

  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§
  static async getUserReviews(
    userId: string
  ): Promise<{ parking: Review[]; hotspring: Review[] }>
}
```

**ãƒ¬ãƒ“ãƒ¥ãƒ¼æ§‹é€ **:
```typescript
interface Review {
  id: string;
  parking_spot_id?: string;
  hot_spring_id?: string;
  user_id: string;
  content: string;
  rating: number;  // 1ï½5
  created_at: string;
  user_display_name?: string;
}
```

---

### 6.7 FavoritesServiceï¼ˆãŠæ°—ã«å…¥ã‚Šã‚µãƒ¼ãƒ“ã‚¹ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/favorites.service.ts`

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:

```typescript
class FavoritesService {
  // ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ 
  static async addFavorite(
    userId: string,
    parkingSpotId: string
  ): Promise<{ error: Error | null }>

  // ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‰Šé™¤
  static async removeFavorite(
    userId: string,
    parkingSpotId: string
  ): Promise<{ error: Error | null }>

  // ãŠæ°—ã«å…¥ã‚Šãƒã‚§ãƒƒã‚¯
  static async isFavorite(
    userId: string,
    parkingSpotId: string
  ): Promise<boolean>

  // ãŠæ°—ã«å…¥ã‚Šä¸€è¦§å–å¾—
  static async getFavorites(
    userId: string
  ): Promise<CoinParking[]>
}
```

---

## 7. çŠ¶æ…‹ç®¡ç†

### 7.1 useMainStoreï¼ˆãƒ¡ã‚¤ãƒ³çŠ¶æ…‹ç®¡ç†ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/stores/useMainStore.ts`

**çŠ¶æ…‹å®šç¾©**:
```typescript
interface MainStore {
  // åœ°å›³ã¨æ¤œç´¢
  mapRegion: Region;
  searchFilter: SearchFilter;
  searchResults: Spot[];
  selectedSpot: Spot | null;

  // UIçŠ¶æ…‹
  showingSpotDetail: boolean;
  isLoading: boolean;
  errorMessage: string | null;
  appBootReady: boolean;

  // ä½ç½®æƒ…å ±
  userLocation: Location | null;
  locationPermission: 'granted' | 'denied' | 'restricted' | null;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  setMapRegion: (region: Region) => void;
  setSearchFilter: (filter: Partial<SearchFilter>) => void;
  setSearchResults: (results: Spot[]) => void;
  selectSpot: (spot: Spot | null) => void;
  setUserLocation: (location: Location | null) => void;
  setAppBootReady: (ready: boolean) => void;
}
```

**åˆæœŸçŠ¶æ…‹**:
```typescript
{
  mapRegion: {
    latitude: 35.6812,   // æ±äº¬é§…
    longitude: 139.7671,
    latitudeDelta: 0.02,
    longitudeDelta: 0.02,
  },
  searchFilter: {
    selectedCategories: new Set(['ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°']),
    searchRadius: 5000,
    minElevation: 0,
    parkingTimeFilterEnabled: true,
    radiusFilterEnabled: false,
    elevationFilterEnabled: false,
    nearbyCategories: new Set(),
    convenienceStoreRadius: 500,
    toiletRadius: 500,
    hotSpringRadius: 5000,
    showFlatParking: true,
    showMultiStoryParking: true,
    showMechanicalParking: true,
    parkingDuration: new ParkingDuration(),
  },
  searchResults: [],
  selectedSpot: null,
  isLoading: false,
  errorMessage: null,
  appBootReady: false,
  userLocation: null,
  locationPermission: null,
}
```

---

### 7.2 useAuthStoreï¼ˆèªè¨¼çŠ¶æ…‹ç®¡ç†ï¼‰
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/stores/useAuthStore.ts`

**çŠ¶æ…‹å®šç¾©**:
```typescript
interface AuthStore {
  // èªè¨¼çŠ¶æ…‹
  user: User | null;
  session: Session | null;
  profile: UserProfile | null;
  isAuthenticated: boolean;
  isLoading: boolean;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  setUser: (user: User | null) => void;
  setSession: (session: Session | null) => void;
  setProfile: (profile: UserProfile | null) => void;
  signOut: () => Promise<void>;
  initializeAuth: () => Promise<void>;
  checkAuth: () => Promise<void>;
}
```

**èªè¨¼åˆæœŸåŒ–**:
```typescript
async initializeAuth() {
  // 1. Supabase Session ã®å–å¾—
  const { data: { session } } = await supabase.auth.getSession();

  // 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚Œã°ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¨­å®š
  if (session) {
    this.setSession(session);
    this.setUser(session.user);

    // 3. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—
    const { data: profile } = await supabase
      .from('user_profiles')
      .select('*')
      .eq('id', session.user.id)
      .single();

    this.setProfile(profile);
  }

  // 4. èªè¨¼çŠ¶æ…‹ã®å¤‰åŒ–ã‚’ç›£è¦–
  supabase.auth.onAuthStateChange((event, session) => {
    this.setSession(session);
    this.setUser(session?.user ?? null);
  });
}
```

---

## 8. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 8.1 parking_spotsï¼ˆé§è»Šå ´ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE parking_spots (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  lat DOUBLE PRECISION NOT NULL,
  lng DOUBLE PRECISION NOT NULL,
  address TEXT,
  description TEXT,
  rates JSONB,                -- æ–™é‡‘é…åˆ—
  hours JSONB,                -- å–¶æ¥­æ™‚é–“
  capacity INTEGER,
  payment_methods TEXT,
  restrictions TEXT,
  vehicle_dimensions JSONB,
  parking_type TEXT,          -- å¹³é¢é§è»Šå ´ã€ç«‹ä½“é§è»Šå ´ã€æ©Ÿæ¢°å¼ã€è»Šä¸­æ³Šãƒ»ã‚­ãƒ£ãƒ³ãƒ—å ´
  nearest_convenience_store JSONB,  -- { id, name, brand, distance }
  nearest_hotspring JSONB,          -- { id, name, distance }
  nearest_toilet JSONB,             -- { id, name, distance }
  elevation DOUBLE PRECISION,
  prefecture TEXT,
  images TEXT[],              -- ç”»åƒURLé…åˆ—
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_parking_spots_location ON parking_spots USING GIST (
  ll_to_earth(lat, lng)
);
CREATE INDEX idx_parking_spots_elevation ON parking_spots (elevation);
CREATE INDEX idx_parking_spots_parking_type ON parking_spots (parking_type);
```

**rates JSONBãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
```json
[
  {
    "type": "base",
    "minutes": 30,
    "price": 0,
    "time_range": "8:00ï½20:00"
  },
  {
    "type": "progressive",
    "minutes": 30,
    "price": 250,
    "apply_after": 30,
    "time_range": "8:00ï½20:00"
  },
  {
    "type": "base",
    "minutes": 60,
    "price": 100,
    "time_range": "20:00ï½8:00"
  },
  {
    "type": "max",
    "minutes": 1440,
    "price": 2400
  }
]
```

**hours JSONBãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
```json
{
  "is_24h": false,
  "hours": "8:00ï½22:00",
  "original_hours": "8æ™‚ã‹ã‚‰22æ™‚ã¾ã§",
  "access_24h": false,
  "closed_days": ["å¹´æœ«å¹´å§‹"],
  "restrictions": []
}
```

---

### 8.2 convenience_storesï¼ˆã‚³ãƒ³ãƒ“ãƒ‹ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE convenience_stores (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  lat DOUBLE PRECISION NOT NULL,
  lng DOUBLE PRECISION NOT NULL,
  brand TEXT,               -- Seven-Eleven, Lawson, FamilyMartç­‰
  sub_type TEXT,
  phone_number TEXT,
  operating_hours TEXT,
  address TEXT,
  elevation DOUBLE PRECISION,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_convenience_stores_location ON convenience_stores USING GIST (
  ll_to_earth(lat, lng)
);
CREATE INDEX idx_convenience_stores_brand ON convenience_stores (brand);
```

---

### 8.3 hot_springsï¼ˆæ¸©æ³‰ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE hot_springs (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  lat DOUBLE PRECISION NOT NULL,
  lng DOUBLE PRECISION NOT NULL,
  address TEXT,
  price TEXT,
  operating_hours TEXT,
  holiday_info TEXT,
  facility_type TEXT,
  description TEXT,
  elevation DOUBLE PRECISION,
  prefecture TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_hot_springs_location ON hot_springs USING GIST (
  ll_to_earth(lat, lng)
);
```

---

### 8.4 gas_stationsï¼ˆã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE gas_stations (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  lat DOUBLE PRECISION NOT NULL,
  lng DOUBLE PRECISION NOT NULL,
  brand TEXT,
  services JSONB,           -- { regular_price, premium_price, diesel_price }
  operating_hours TEXT,
  address TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_gas_stations_location ON gas_stations USING GIST (
  ll_to_earth(lat, lng)
);
```

---

### 8.5 festivalsï¼ˆãŠç¥­ã‚Šãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE festivals (
  id BIGSERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  lat DOUBLE PRECISION NOT NULL,
  lng DOUBLE PRECISION NOT NULL,
  address TEXT,
  event_date TEXT,
  event_type TEXT,
  description TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_festivals_location ON festivals USING GIST (
  ll_to_earth(lat, lng)
);
```

---

### 8.6 user_profilesï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE user_profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  display_name TEXT NOT NULL,
  avatar_url TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

### 8.7 parking_reviewsï¼ˆé§è»Šå ´ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE parking_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  parking_spot_id BIGINT NOT NULL REFERENCES parking_spots(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_parking_reviews_parking_spot_id ON parking_reviews (parking_spot_id);
CREATE INDEX idx_parking_reviews_user_id ON parking_reviews (user_id);
```

---

### 8.8 hot_spring_reviewsï¼ˆæ¸©æ³‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE hot_spring_reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  hot_spring_id BIGINT NOT NULL REFERENCES hot_springs(id) ON DELETE CASCADE,
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_hot_spring_reviews_hot_spring_id ON hot_spring_reviews (hot_spring_id);
CREATE INDEX idx_hot_spring_reviews_user_id ON hot_spring_reviews (user_id);
```

---

### 8.9 favoritesï¼ˆãŠæ°—ã«å…¥ã‚Šãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE favorites (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  parking_spot_id BIGINT NOT NULL REFERENCES parking_spots(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE (user_id, parking_spot_id)
);

CREATE INDEX idx_favorites_user_id ON favorites (user_id);
```

---

### 8.10 parking_submissionsï¼ˆé§è»Šå ´æŠ•ç¨¿ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE parking_submissions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  image_url TEXT NOT NULL,
  extracted_data JSONB,         -- OCRæŠ½å‡ºãƒ‡ãƒ¼ã‚¿
  confidence_score NUMERIC(3, 2) CHECK (confidence_score >= 0 AND confidence_score <= 1),
  submission_status TEXT NOT NULL DEFAULT 'pending',  -- pending, approved, rejected
  parking_spot_id BIGINT REFERENCES parking_spots(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE INDEX idx_parking_submissions_user_id ON parking_submissions (user_id);
CREATE INDEX idx_parking_submissions_status ON parking_submissions (submission_status);
CREATE INDEX idx_parking_submissions_confidence ON parking_submissions (confidence_score DESC);
```

---

### 8.11 SQLé–¢æ•°

#### normalize_time_stringï¼ˆ24æ™‚é–“è¶…ã®æ™‚åˆ»æ­£è¦åŒ–ï¼‰
```sql
CREATE OR REPLACE FUNCTION normalize_time_string(time_str text)
RETURNS time
LANGUAGE plpgsql
IMMUTABLE
AS $$
DECLARE
  hour_part integer;
  minute_part integer;
  normalized_hour integer;
BEGIN
  -- "25:30" â†’ "01:30" ã«æ­£è¦åŒ–
  hour_part := split_part(time_str, ':', 1)::integer;
  minute_part := split_part(time_str, ':', 2)::integer;
  normalized_hour := hour_part % 24;
  RETURN make_time(normalized_hour, minute_part, 0);
EXCEPTION
  WHEN OTHERS THEN
    RETURN '00:00:00'::time;
END;
$$;
```

#### calculate_simple_parking_feeï¼ˆé§è»Šæ–™é‡‘è¨ˆç®—ï¼‰
```sql
CREATE OR REPLACE FUNCTION calculate_simple_parking_fee(
  rates jsonb,
  parking_start timestamptz,
  duration_minutes integer
)
RETURNS integer
LANGUAGE plpgsql
AS $$
DECLARE
  base_rate jsonb := NULL;
  progressive_rate jsonb := NULL;
  max_rate jsonb := NULL;
  best_cost integer := 0;
  -- ãã®ä»–ã®å¤‰æ•°...
BEGIN
  -- æ–™é‡‘ã‚¿ã‚¤ãƒ—ã”ã¨ã«é©ç”¨å¯èƒ½ãªæ–™é‡‘ã‚’é¸æŠ
  -- æ™‚é–“å¸¯ãƒã‚§ãƒƒã‚¯ï¼ˆ24æ™‚é–“è¶…å¯¾å¿œï¼‰
  -- ç´¯é€²æ–™é‡‘ã®è¨ˆç®—
  -- æœ€å¤§æ–™é‡‘ã®é©ç”¨
  RETURN best_cost;
END;
$$;
```

#### get_parking_spots_sorted_by_feeï¼ˆæ–™é‡‘é †ã‚½ãƒ¼ãƒˆæ¸ˆã¿é§è»Šå ´å–å¾—RPCï¼‰
```sql
CREATE OR REPLACE FUNCTION get_parking_spots_sorted_by_fee(
  min_lat double precision,
  max_lat double precision,
  min_lng double precision,
  max_lng double precision,
  duration_minutes integer,
  parking_start timestamptz
)
RETURNS TABLE (
  id bigint,
  name text,
  lat double precision,
  lng double precision,
  -- ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰...
  calculated_fee integer,
  total_count integer
)
LANGUAGE plpgsql
AS $$
BEGIN
  RETURN QUERY
  WITH filtered_spots AS (
    SELECT * FROM parking_spots
    WHERE lat BETWEEN min_lat AND max_lat
      AND lng BETWEEN min_lng AND max_lng
  ),
  calculated AS (
    SELECT
      *,
      calculate_simple_parking_fee(rates, parking_start, duration_minutes) AS fee
    FROM filtered_spots
  )
  SELECT
    *,
    COUNT(*) OVER () AS total_count
  FROM calculated
  ORDER BY fee ASC NULLS LAST
  LIMIT 20;
END;
$$;
```

---

### 8.12 Supabase Storage

#### parking-submissions ãƒã‚±ãƒƒãƒˆ
**ç”¨é€”**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŠ•ç¨¿ã—ãŸé§è»Šå ´çœ‹æ¿ã®å†™çœŸã‚’ä¿å­˜

**è¨­å®š**:
- Public: falseï¼ˆèªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯ï¼‰
- File size limit: 10MB
- Allowed MIME types: image/jpeg, image/png

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ **:
```
parking-submissions/
  â”œâ”€â”€ {userId}/
  â”‚   â”œâ”€â”€ {timestamp1}.jpg
  â”‚   â”œâ”€â”€ {timestamp2}.jpg
  â”‚   â””â”€â”€ ...
```

**ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¾‹**:
```typescript
const { data, error } = await supabase.storage
  .from('parking-submissions')
  .upload(`${userId}/${Date.now()}.jpg`, file);
```

---

### 8.13 Supabase Edge Functions

#### process-parking-image
**è¨€èª**: Deno (TypeScript)

**ãƒˆãƒªã‚¬ãƒ¼**: Storage webhookï¼ˆparking-submissions ãƒã‚±ãƒƒãƒˆã¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. Gemini 2.5 Flash API ã§OCRå®Ÿè¡Œ
3. é§è»Šå ´ãƒ‡ãƒ¼ã‚¿ã‚’æ­£è¦åŒ–ï¼ˆæ–™é‡‘æ§‹é€ ã€å–¶æ¥­æ™‚é–“ã€ä½æ‰€ç­‰ï¼‰
4. ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆå…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å®Œå…¨æ€§ï¼‰
5. `parking_submissions` ãƒ†ãƒ¼ãƒ–ãƒ«ã«çµæœã‚’ä¿å­˜

**Gemini API ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**:
```
ã“ã®é§è»Šå ´ã®çœ‹æ¿ç”»åƒã‹ã‚‰ä»¥ä¸‹ã®æƒ…å ±ã‚’æŠ½å‡ºã—ã¦JSONã§è¿”ã—ã¦ãã ã•ã„ï¼š
- name: é§è»Šå ´å
- address: ä½æ‰€
- latitude: ç·¯åº¦
- longitude: çµŒåº¦
- capacity: åå®¹å°æ•°
- rates: æ–™é‡‘é…åˆ—
  - type: "base" | "progressive" | "max"
  - minutes: æ™‚é–“ï¼ˆåˆ†ï¼‰
  - price: æ–™é‡‘ï¼ˆå††ï¼‰
  - apply_after: ç´¯é€²æ–™é‡‘ã®é©ç”¨é–‹å§‹æ™‚é–“ï¼ˆåˆ†ï¼‰
  - time_range: æ™‚é–“å¸¯ï¼ˆä¾‹: "8:00ï½20:00"ï¼‰
- hours: å–¶æ¥­æ™‚é–“
  - is_24h: 24æ™‚é–“å–¶æ¥­ã‹ã©ã†ã‹
  - hours: å–¶æ¥­æ™‚é–“æ–‡å­—åˆ—
- nearest_convenience_store: æœ€å¯„ã‚Šã®ã‚³ãƒ³ãƒ“ãƒ‹ï¼ˆåå‰ã¨è·é›¢ï¼‰
- nearest_hot_spring: æœ€å¯„ã‚Šã®æ¸©æ³‰ï¼ˆåå‰ã¨è·é›¢ï¼‰
```

**ç’°å¢ƒå¤‰æ•°**:
```bash
GEMINI_API_KEY="AIzaSy..."
```

**ãƒ‡ãƒ—ãƒ­ã‚¤ã‚³ãƒãƒ³ãƒ‰**:
```bash
npx supabase functions deploy process-parking-image
npx supabase secrets set GEMINI_API_KEY="your_key"
```

---

## 9. UI/UXãƒ‘ã‚¿ãƒ¼ãƒ³

### 9.1 äºŒæ®µéšã‚¿ãƒƒãƒ—æ“ä½œ
**ç›®çš„**: èª¤ã‚¿ãƒƒãƒ—ã‚’é˜²ãã¤ã¤ã€è©³ç´°æƒ…å ±ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ãã™ã‚‹

**å‹•ä½œ**:
1. **1å›ç›®ã®ã‚¿ãƒƒãƒ—**: ãƒãƒ¼ã‚«ãƒ¼ã®ã‚³ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆè¡¨ç¤º
   - é§è»Šå ´å
   - æ–™é‡‘ï¼ˆè¨ˆç®—æ¸ˆã¿ï¼‰
   - è·é›¢ï¼ˆç¾åœ¨åœ°ã‹ã‚‰ï¼‰

2. **2å›ç›®ã®ã‚¿ãƒƒãƒ—**: è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆè¡¨ç¤º
   - å®Œå…¨ãªæƒ…å ±
   - ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³

**å®Ÿè£…**:
```typescript
const [selectedSpot, setSelectedSpot] = useState<Spot | null>(null);
const [showDetailSheet, setShowDetailSheet] = useState(false);

const handleMarkerPress = (spot: Spot) => {
  if (selectedSpot?.id === spot.id) {
    // 2å›ç›®ã®ã‚¿ãƒƒãƒ— â†’ è©³ç´°ã‚·ãƒ¼ãƒˆè¡¨ç¤º
    setShowDetailSheet(true);
  } else {
    // 1å›ç›®ã®ã‚¿ãƒƒãƒ— â†’ é¸æŠã®ã¿
    setSelectedSpot(spot);
    setShowDetailSheet(false);
  }
};
```

---

### 9.2 ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒªã‚¹ãƒˆã‹ã‚‰ã®è©³ç´°è¡¨ç¤º
**å•é¡Œ**: React Nativeã§ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é‡ã­ã‚‰ã‚Œãªã„

**è§£æ±ºç­–**:
1. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
2. `setTimeout` ã§50mså¾…ã¤
3. è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆã‚’é–‹ã

**å®Ÿè£…**:
```typescript
const handleRankingSpotDetail = async (spot: Spot) => {
  setShowRankingModal(false);  // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹

  setTimeout(() => {
    selectSpot(spot);           // ã‚¹ãƒãƒƒãƒˆã‚’é¸æŠ
    setShowDetailSheet(true);   // è©³ç´°ã‚·ãƒ¼ãƒˆã‚’é–‹ã
  }, 50);
};
```

---

### 9.3 ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«éšå±¤

#### ãƒãƒ¼ã‚«ãƒ¼ã®è¦–è¦šçš„é‡è¦åº¦
1. **é‡‘ãƒ¡ãƒ€ãƒ«ï¼ˆ1ä½ï¼‰**: æœ€ã‚‚ç›®ç«‹ã¤
2. **éŠ€ãƒ¡ãƒ€ãƒ«ï¼ˆ2ä½ï¼‰**: æ¬¡ã«ç›®ç«‹ã¤
3. **éŠ…ãƒ¡ãƒ€ãƒ«ï¼ˆ3ä½ï¼‰**: 3ç•ªç›®
4. **é’ã„ç•ªå·ãƒãƒ¼ã‚«ãƒ¼ï¼ˆ4ï½20ä½ï¼‰**: é †ä½ã‚’è¡¨ç¤º
5. **é¸æŠä¸­ãƒãƒ¼ã‚«ãƒ¼**: 1.3å€ã‚¹ã‚±ãƒ¼ãƒ« + èµ¤æ 

#### ãƒ¢ãƒ¼ãƒ€ãƒ«/ã‚·ãƒ¼ãƒˆã®é«˜ã•
- **ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ«**: ç”»é¢ã®50%
- **è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ**: ç”»é¢ã®45%
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒãƒ«**: å›ºå®šé«˜ã•ï¼ˆå†…å®¹ã«ã‚ˆã‚Šå¯å¤‰ï¼‰

---

### 9.4 ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 
```typescript
const Colors = {
  primary: '#1976d2',       // é’ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰
  secondary: '#4CAF50',     // ç·‘ï¼ˆã‚³ãƒ³ãƒ“ãƒ‹ï¼‰
  accent: '#FFD700',        // é‡‘ï¼ˆæ¸©æ³‰ï¼‰
  warning: '#FF9800',       // ã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰ï¼‰
  error: '#f44336',         // èµ¤ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰
  background: '#FFFFFF',    // ç™½
  surface: '#F5F5F5',       // ãƒ©ã‚¤ãƒˆã‚°ãƒ¬ãƒ¼
  text: '#212121',          // ãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼
  textSecondary: '#757575', // ã‚°ãƒ¬ãƒ¼
};
```

---

### 9.5 ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

#### ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹
- **åœ°å›³åˆæœŸåŒ–ä¸­**: å…¨ç”»é¢ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ + ã‚¹ãƒ”ãƒŠãƒ¼
- **æ¤œç´¢ä¸­**: åŠé€æ˜ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ + ã‚¹ãƒ”ãƒŠãƒ¼
- **ä½ç½®æƒ…å ±å–å¾—ä¸­**: å°ã•ãªç™½ã„ãƒ”ãƒ«å‹ãƒ†ã‚­ã‚¹ãƒˆï¼ˆç”»é¢ä¸‹éƒ¨ï¼‰

#### ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
- **ä½ç½®æƒ…å ±å–å¾—ä¸­**: "ğŸ“ ç¾åœ¨åœ°ã‚’å–å¾—ä¸­..."
- **å–å¾—å¤±æ•—**: "âš ï¸ ç¾åœ¨åœ°ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ"
- 3ç§’å¾Œã«è‡ªå‹•ã§æ¶ˆãˆã‚‹

#### ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- **é‡è¦ãªã‚¨ãƒ©ãƒ¼**: `Alert.alert` ã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
- **ãƒ‡ãƒãƒƒã‚°ã‚¨ãƒ©ãƒ¼**: `console.log` ã®ã¿ï¼ˆã‚¢ãƒ—ãƒªä¸Šã«ã¯è¡¨ç¤ºã—ãªã„ï¼‰

---

## 10. é§è»Šæ–™é‡‘è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### 10.1 æ–™é‡‘ã‚¿ã‚¤ãƒ—

#### baseï¼ˆåŸºæœ¬æ–™é‡‘ï¼‰
æœ€åˆã®æ™‚é–“å˜ä½ã«é©ç”¨ã•ã‚Œã‚‹æ–™é‡‘

**ä¾‹**:
```json
{ "type": "base", "minutes": 30, "price": 0 }
```
â†’ æœ€åˆã®30åˆ†ã¯ç„¡æ–™

#### progressiveï¼ˆç´¯é€²æ–™é‡‘ï¼‰
`applyAfter` åˆ†çµŒéå¾Œã«é©ç”¨ã•ã‚Œã‚‹æ–™é‡‘

**ä¾‹**:
```json
{ "type": "progressive", "minutes": 30, "price": 250, "applyAfter": 30 }
```
â†’ 30åˆ†çµŒéå¾Œã€30åˆ†ã”ã¨ã«250å††

#### maxï¼ˆæœ€å¤§æ–™é‡‘ï¼‰
æŒ‡å®šæ™‚é–“æ å†…ã§ã®ä¸Šé™

**ä¾‹**:
```json
{ "type": "max", "minutes": 1440, "price": 2400 }
```
â†’ 24æ™‚é–“ï¼ˆ1440åˆ†ï¼‰ä»¥å†…ãªã‚‰æœ€å¤§2400å††

---

### 10.2 æ™‚é–“å¸¯åˆ¥æ–™é‡‘

**æ™‚é–“å¸¯ã®è¡¨è¨˜**:
```json
{ "time_range": "8:00ï½20:00" }
```

**24æ™‚é–“è¶…ã®è¡¨è¨˜å¯¾å¿œ**:
```json
{ "time_range": "25:30ï½5:30" }
```
â†’ `normalize_time_string()` ã§ "01:30ï½05:30" ã«æ­£è¦åŒ–

---

### 10.3 è¨ˆç®—ä¾‹

#### ä¾‹1: åŸºæœ¬ + ç´¯é€² + æœ€å¤§
**æ–™é‡‘æ§‹é€ **:
```json
[
  { "type": "base", "minutes": 30, "price": 0 },
  { "type": "progressive", "minutes": 30, "price": 250, "applyAfter": 30 },
  { "type": "max", "minutes": 1440, "price": 2400 }
]
```

**é§è»Šæ™‚é–“**: 2æ™‚é–“ï¼ˆ120åˆ†ï¼‰

**è¨ˆç®—**:
1. æœ€åˆ30åˆ†: 0å††ï¼ˆbaseï¼‰
2. æ®‹ã‚Š90åˆ†: 90 / 30 = 3ãƒ–ãƒ­ãƒƒã‚¯ Ã— 250å†† = 750å††ï¼ˆprogressiveï¼‰
3. åˆè¨ˆ: 0 + 750 = **750å††**
4. æœ€å¤§æ–™é‡‘ãƒã‚§ãƒƒã‚¯: 750å†† < 2400å†† â†’ **750å††**

---

#### ä¾‹2: 24æ™‚é–“è¶…ã®é§è»Š
**æ–™é‡‘æ§‹é€ **:
```json
[
  { "type": "base", "minutes": 60, "price": 100 },
  { "type": "max", "minutes": 1440, "price": 1000 }
]
```

**é§è»Šæ™‚é–“**: 50æ™‚é–“ï¼ˆ3000åˆ†ï¼‰

**è¨ˆç®—**:
1. æœ€åˆã®24æ™‚é–“ï¼ˆ1440åˆ†ï¼‰: 1000å††ï¼ˆmaxï¼‰
2. æ¬¡ã®24æ™‚é–“ï¼ˆ1440åˆ†ï¼‰: 1000å††ï¼ˆmaxï¼‰
3. æ®‹ã‚Š2æ™‚é–“ï¼ˆ120åˆ†ï¼‰: 120 / 60 Ã— 100 = 200å††ï¼ˆbaseï¼‰
4. åˆè¨ˆ: 1000 + 1000 + 200 = **2200å††**

**æ³¨**: ã‚µãƒ¼ãƒãƒ¼å´ã® `calculate_parking_fee_dp_with_repeat` é–¢æ•°ã¯ã€24æ™‚é–“æœ€å¤§æ–™é‡‘ã‚’ç¹°ã‚Šè¿”ã—é©ç”¨ã—ã¾ã™ã€‚

---

#### ä¾‹3: æ™‚é–“å¸¯åˆ¥æ–™é‡‘
**æ–™é‡‘æ§‹é€ **:
```json
[
  { "type": "base", "minutes": 60, "price": 300, "time_range": "8:00ï½20:00" },
  { "type": "base", "minutes": 60, "price": 100, "time_range": "20:00ï½8:00" },
  { "type": "max", "minutes": 1440, "price": 2000 }
]
```

**é§è»Šæ™‚é–“**: 19:00ï½ç¿Œ9:00ï¼ˆ14æ™‚é–“ï¼‰

**è¨ˆç®—**:
1. **æ˜¼é–“å¸¯ï¼ˆ19:00ï½20:00ï¼‰**: 1æ™‚é–“ Ã— 300å†† = 300å††
2. **å¤œé–“å¸¯ï¼ˆ20:00ï½8:00ï¼‰**: 12æ™‚é–“ Ã— 100å†† = 1200å††
3. **æ˜¼é–“å¸¯ï¼ˆ8:00ï½9:00ï¼‰**: 1æ™‚é–“ Ã— 300å†† = 300å††
4. åˆè¨ˆ: 300 + 1200 + 300 = **1800å††**
5. æœ€å¤§æ–™é‡‘ãƒã‚§ãƒƒã‚¯: 1800å†† < 2000å†† â†’ **1800å††**

---

### 10.4 ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¡¨ç¤º

**å…¥åŠ›**:
```json
[
  { "type": "base", "minutes": 30, "price": 0 },
  { "type": "progressive", "minutes": 30, "price": 250, "applyAfter": 30 },
  { "type": "max", "minutes": 1440, "price": 2400 }
]
```

**å‡ºåŠ›**:
```
30åˆ†æœªæº€ç„¡æ–™ã€30åˆ†ä»¥é™å…¥åº«ã‹ã‚‰30åˆ†æ¯Â¥250ã€24æ™‚é–“æœ€å¤§Â¥2,400
```

**å®Ÿè£…**: `ParkingFeeCalculator.formatFeeInfo()`

---

## 11. ä½ç½®æƒ…å ±æ©Ÿèƒ½

### 11.1 åˆå›èµ·å‹•æ™‚ã®å‹•ä½œ
1. **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤è¡¨ç¤º** (`isInitializingMap: true`)
2. **å‰å›ã®åœ°å›³ç¯„å›²ã‚’å¾©å…ƒ** (AsyncStorage ã‹ã‚‰èª­ã¿è¾¼ã¿)
3. **åœ°å›³ã‚’è¡¨ç¤º** (`isInitializingMap: false`)
4. **ä¸¦è¡Œã—ã¦ç¾åœ¨åœ°ã‚’å–å¾—**
5. **ç¾åœ¨åœ°å–å¾—æˆåŠŸ** â†’ ç¾åœ¨åœ°ã«ç§»å‹•ï¼ˆ1ç§’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
6. **ç¾åœ¨åœ°å–å¾—å¤±æ•—** â†’ å‰å›ã®ä½ç½®ã‚’ç¶™ç¶šä½¿ç”¨
7. **å‰å›ã®ä½ç½®ã‚‚ãªã„** â†’ æ±äº¬é§…ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤º

### 11.2 GPSç²¾åº¦è¨­å®š
```typescript
{
  accuracy: Location.Accuracy.High,
  maximumAge: 10000,  // 10ç§’ä»¥å†…ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½¿ç”¨
  timeout: 15000,     // 15ç§’ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
}
```

### 11.3 ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¿½è·¡
**ãƒˆãƒªã‚¬ãƒ¼**: ç¾åœ¨åœ°ãƒœã‚¿ãƒ³ï¼ˆå³ä¸‹ã®é’ã„ãƒœã‚¿ãƒ³ï¼‰ã‚’ã‚¿ãƒƒãƒ—

**æ›´æ–°é–“éš”**:
- 2ç§’ã”ã¨
- ã¾ãŸã¯10mç§»å‹•ã”ã¨

**åœæ­¢**: ã‚‚ã†ä¸€åº¦ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—

### 11.4 ä½ç½®æƒ…å ±æ¨©é™
- **granted**: å¸¸ã«è¨±å¯
- **denied**: æ‹’å¦
- **restricted**: åˆ¶é™ï¼ˆãƒšã‚¢ãƒ¬ãƒ³ã‚¿ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ç­‰ï¼‰

**æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«è‡ªå‹•ã§å®Ÿè¡Œ

---

## 12. èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

### 12.1 èªè¨¼æ–¹å¼
1. **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ + ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**
2. **Google OAuth**

### 12.2 èªè¨¼ãƒ•ãƒ­ãƒ¼

#### æ–°è¦ç™»éŒ²
1. `SignUpScreen` ã§ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ»è¡¨ç¤ºåã‚’å…¥åŠ›
2. `AuthService.signUp()` â†’ Supabase Auth
3. `AuthService.createProfileSafely()` â†’ `user_profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆUPSERTï¼‰
4. `useAuthStore` ã«çŠ¶æ…‹ä¿å­˜
5. AsyncStorage ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒ
6. MapScreen ã«è‡ªå‹•é·ç§»

#### ãƒ­ã‚°ã‚¤ãƒ³
1. `LoginScreen` ã§ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
2. `AuthService.signIn()` â†’ Supabase Auth
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾— â†’ `useAuthStore` ã«ä¿å­˜
4. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾— â†’ `user_profiles` ãƒ†ãƒ¼ãƒ–ãƒ«
5. MapScreen ã«è‡ªå‹•é·ç§»

#### Google OAuth
1. `LoginScreen` ã§ã€ŒGoogleã§ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
2. `AuthService.signInWithGoogle()` â†’ Supabase Auth
3. ãƒ–ãƒ©ã‚¦ã‚¶ã§Googleèªè¨¼
4. ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯: `car-concierge-app://auth/callback`
5. ã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾— â†’ `useAuthStore` ã«ä¿å­˜
6. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆ
7. MapScreen ã«è‡ªå‹•é·ç§»

### 12.3 ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

**åˆæœŸåŒ–** (`App.tsx`):
```typescript
useEffect(() => {
  const initAuth = async () => {
    await initializeAuth();
  };
  initAuth();
}, [initializeAuth]);
```

**ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£è¦–**:
```typescript
supabase.auth.onAuthStateChange((event, session) => {
  if (event === 'SIGNED_IN') {
    setSession(session);
    setUser(session.user);
  } else if (event === 'SIGNED_OUT') {
    setSession(null);
    setUser(null);
  }
});
```

**ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼**:
```typescript
// ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿å‰ãªã©
const session = await supabase.auth.getSession();
if (!session.data.session) {
  Alert.alert('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿ã™ã‚‹ã«ã¯ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚');
  return;
}
```

### 12.4 ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆï¼ˆé‡è¤‡å›é¿ï¼‰
```typescript
async createProfileSafely(userId: string, displayName: string) {
  const { error } = await supabase
    .from('user_profiles')
    .upsert({
      id: userId,
      display_name: displayName,
    }, {
      onConflict: 'id',  // é‡è¤‡æ™‚ã¯æ›´æ–°
    });

  return { error };
}
```

---

## 13. ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿æ©Ÿèƒ½ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ã‚½ãƒ¼ã‚·ãƒ³ã‚°ï¼‰

### 13.1 æŠ•ç¨¿ãƒ•ãƒ­ãƒ¼
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼**: é§è»Šå ´ã®çœ‹æ¿å†™çœŸã‚’æ’®å½±/é¸æŠ
2. **ã‚¢ãƒ—ãƒª**: ç”»åƒã‚’ Supabase Storage ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. **Edge Function**: ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ â†’ Gemini API ã§OCR
4. **Gemini API**: æ–™é‡‘æ§‹é€ ã‚’æ­£è¦åŒ– â†’ JSONè¿”å´
5. **Edge Function**: ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®— â†’ `parking_submissions` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜
6. **ç®¡ç†è€…**: `AdminSubmissionsScreen` ã§æ‰¿èªãƒ»å´ä¸‹ãƒ»ç·¨é›†
7. **æ‰¿èªæ™‚**: `parking_spots` ãƒ†ãƒ¼ãƒ–ãƒ«ã«æŒ¿å…¥ï¼ˆã¾ãŸã¯æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ï¼‰

### 13.2 OCRæŠ½å‡ºé …ç›®
- **name**: é§è»Šå ´å
- **address**: ä½æ‰€
- **latitude**: ç·¯åº¦
- **longitude**: çµŒåº¦
- **capacity**: åå®¹å°æ•°
- **rates**: æ–™é‡‘é…åˆ—
  - type, minutes, price, apply_after, time_range
- **hours**: å–¶æ¥­æ™‚é–“
  - is_24h, hours
- **nearest_convenience_store**: æœ€å¯„ã‚Šã®ã‚³ãƒ³ãƒ“ãƒ‹
- **nearest_hot_spring**: æœ€å¯„ã‚Šã®æ¸©æ³‰

### 13.3 ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢è¨ˆç®—
```typescript
let score = 0;
const fields = ['name', 'address', 'latitude', 'longitude', 'rates'];
const filledFields = fields.filter(f => extractedData[f] != null).length;
score = filledFields / fields.length;

// 0.0 ï½ 1.0
```

**æ¨å¥¨**: 0.85ä»¥ä¸Šã¯è‡ªå‹•æ‰¿èªå¯èƒ½

### 13.4 ç®¡ç†ç”»é¢ã®æ©Ÿèƒ½
1. **æŠ•ç¨¿ãƒªã‚¹ãƒˆè¡¨ç¤º**: ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢é †
2. **ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: æ‹¡å¤§è¡¨ç¤º
3. **JSONç·¨é›†**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
4. **é‡è¤‡ãƒã‚§ãƒƒã‚¯**: åº§æ¨™ãƒ»åå‰ã§æ¤œå‡º
5. **æ‰¿èª/æ›´æ–°**: ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§é¸æŠ
6. **å´ä¸‹**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ã®ã¿

---

## 14. ç’°å¢ƒå¤‰æ•°ã¨è¨­å®š

### 14.1 .env ãƒ•ã‚¡ã‚¤ãƒ«
```bash
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=eyJhbGc...
```

### 14.2 app.json
```json
{
  "expo": {
    "name": "è»Šæ—…ã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥",
    "slug": "car-concierge-app",
    "version": "1.0.0",
    "owner": "hiroakiyasa",
    "ios": {
      "bundleIdentifier": "com.carconciege.app",
      "supportsTablet": true,
      "infoPlist": {
        "NSLocationWhenInUseUsageDescription": "ç¾åœ¨åœ°ã‚’åœ°å›³ã«è¡¨ç¤ºã™ã‚‹ãŸã‚",
        "NSCameraUsageDescription": "é§è»Šå ´ã®å†™çœŸã‚’æŠ•ç¨¿ã™ã‚‹ãŸã‚",
        "NSPhotoLibraryUsageDescription": "é§è»Šå ´ã®å†™çœŸã‚’é¸æŠã™ã‚‹ãŸã‚"
      }
    },
    "android": {
      "package": "com.carconciege.app",
      "permissions": [
        "ACCESS_FINE_LOCATION",
        "ACCESS_COARSE_LOCATION",
        "CAMERA",
        "READ_EXTERNAL_STORAGE",
        "WRITE_EXTERNAL_STORAGE"
      ]
    },
    "plugins": [
      [
        "expo-image-picker",
        {
          "photosPermission": "é§è»Šå ´ã®å†™çœŸã‚’é¸æŠã™ã‚‹ãŸã‚"
        }
      ],
      [
        "expo-location",
        {
          "locationAlwaysAndWhenInUsePermission": "ç¾åœ¨åœ°ã‚’åœ°å›³ã«è¡¨ç¤ºã™ã‚‹ãŸã‚"
        }
      ]
    ]
  }
}
```

### 14.3 EAS Build è¨­å®š
```json
{
  "cli": {
    "version": ">= 5.2.0"
  },
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal"
    },
    "production": {}
  },
  "submit": {
    "production": {}
  }
}
```

---

## 15. ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

### 15.1 é–‹ç™ºç’°å¢ƒã®èµ·å‹•
```bash
cd car-concierge-app
npm install
npx pod-install  # iOS only
npm start
```

### 15.2 iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
```bash
npm run ios
```

### 15.3 Android ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
```bash
npm run android
```

### 15.4 Web ãƒ–ãƒ©ã‚¦ã‚¶
```bash
npm run web
```

### 15.5 ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
```bash
# iOS
eas build --platform ios --profile production

# Android
eas build --platform android --profile production
```

### 15.6 ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢æå‡º
```bash
# iOS
eas submit --platform ios

# Android
eas submit --platform android
```

### 15.7 Edge Function ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
cd supabase/functions
npx supabase functions deploy process-parking-image
npx supabase secrets set GEMINI_API_KEY="your_api_key"
```

---

## ä»˜éŒ²A: ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | å½¹å‰² |
|-----------------|------------|------|
| MapScreen | src/screens/MapScreen.tsx | ãƒ¡ã‚¤ãƒ³åœ°å›³ç”»é¢ |
| CompactBottomPanel | src/components/CompactBottomPanel.tsx | ãƒ•ã‚£ãƒ«ã‚¿ãƒ‘ãƒãƒ« |
| CategoryButtons | src/components/CategoryButtons.tsx | ã‚«ãƒ†ã‚´ãƒªé¸æŠ |
| RankingListModal | src/screens/RankingListModal.tsx | ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ€ãƒ« |
| SpotDetailBottomSheet | src/screens/SpotDetailBottomSheet.tsx | è©³ç´°ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ |
| CustomMarker | src/components/CustomMarker.tsx | åœ°å›³ãƒãƒ¼ã‚«ãƒ¼ |
| LoginScreen | src/screens/auth/LoginScreen.tsx | ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ |
| SignUpScreen | src/screens/auth/SignUpScreen.tsx | æ–°è¦ç™»éŒ²ç”»é¢ |
| AddParkingScreen | src/screens/AddParkingScreen.tsx | é§è»Šå ´æŠ•ç¨¿ç”»é¢ |
| AdminSubmissionsScreen | src/screens/AdminSubmissionsScreen.tsx | æŠ•ç¨¿ç®¡ç†ç”»é¢ |
| ProfileScreen | src/screens/ProfileScreen.tsx | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ |
| FavoritesScreen | src/screens/FavoritesScreen.tsx | ãŠæ°—ã«å…¥ã‚Šç”»é¢ |
| MyReviewsScreen | src/screens/MyReviewsScreen.tsx | ãƒã‚¤ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»é¢ |

---

## ä»˜éŒ²B: ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§

| ã‚µãƒ¼ãƒ“ã‚¹å | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ | å½¹å‰² |
|----------|------------|------|
| SupabaseService | src/services/supabase.service.ts | ãƒ‡ãƒ¼ã‚¿å–å¾— |
| SearchService | src/services/search.service.ts | æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ |
| ParkingFeeCalculator | src/services/parking-fee.service.ts | æ–™é‡‘è¨ˆç®— |
| LocationService | src/services/location.service.ts | GPSä½ç½®æƒ…å ± |
| AuthService | src/services/auth.service.ts | èªè¨¼ |
| ReviewService | src/services/review.service.ts | ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| FavoritesService | src/services/favorites.service.ts | ãŠæ°—ã«å…¥ã‚Š |

---

## ä»˜éŒ²C: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

| ãƒ†ãƒ¼ãƒ–ãƒ«å | ä¸»è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | è¡Œæ•°ç›®å®‰ |
|----------|--------------|---------|
| parking_spots | id, name, lat, lng, rates, hours, parking_type | 50,000+ |
| convenience_stores | id, name, lat, lng, brand | 20,000+ |
| hot_springs | id, name, lat, lng, price | 5,000+ |
| gas_stations | id, name, lat, lng, brand | 10,000+ |
| festivals | id, name, lat, lng, event_date | 1,000+ |
| user_profiles | id, display_name | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•° |
| parking_reviews | id, parking_spot_id, user_id, content, rating | ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•° |
| hot_spring_reviews | id, hot_spring_id, user_id, content, rating | ãƒ¬ãƒ“ãƒ¥ãƒ¼æ•° |
| favorites | id, user_id, parking_spot_id | ãŠæ°—ã«å…¥ã‚Šæ•° |
| parking_submissions | id, user_id, image_url, extracted_data | æŠ•ç¨¿æ•° |

---

## ä»˜éŒ²D: ä¸»è¦ãªå‹å®šç¾©

ã™ã¹ã¦ã®å‹å®šç¾©ã¯ `src/types/index.ts` ã«é›†ç´„ã•ã‚Œã¦ã„ã¾ã™ã€‚

**ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã‚‹å‹**:
- `Spot` (åŸºæœ¬ã‚¹ãƒãƒƒãƒˆ)
- `CoinParking` (é§è»Šå ´)
- `ConvenienceStore` (ã‚³ãƒ³ãƒ“ãƒ‹)
- `HotSpring` (æ¸©æ³‰)
- `GasStation` (ã‚¬ã‚½ãƒªãƒ³ã‚¹ã‚¿ãƒ³ãƒ‰)
- `Festival` (ãŠç¥­ã‚Š)
- `ParkingRate` (æ–™é‡‘æ§‹é€ )
- `HoursInfo` (å–¶æ¥­æ™‚é–“)
- `SearchFilter` (æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿)
- `Region` (åœ°å›³ç¯„å›²)
- `Location` (ä½ç½®æƒ…å ±)
- `MainStore` (ãƒ¡ã‚¤ãƒ³çŠ¶æ…‹)

---

## ã¾ã¨ã‚

ã“ã®ä»•æ§˜æ›¸ã¯ã€**è»Šæ—…ã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥ï¼ˆCAR Conciergeï¼‰** ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¨æ©Ÿèƒ½ã‚’å†ç¾ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®æƒ…å ±ã‚’ç¶²ç¾…ã—ã¦ã„ã¾ã™ã€‚

**ä¸»è¦ãªæŠ€è¡“çš„ç‰¹å¾´**:
1. React Native/Expo ã«ã‚ˆã‚‹ iOS/Android/Web å¯¾å¿œ
2. Supabase ã«ã‚ˆã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆPostgreSQL + Edge Functions + Storageï¼‰
3. è¤‡é›‘ãªé§è»Šæ–™é‡‘è¨ˆç®—ï¼ˆåŸºæœ¬ãƒ»ç´¯é€²ãƒ»æœ€å¤§ãƒ»æ™‚é–“å¸¯åˆ¥ãƒ»24æ™‚é–“è¶…å¯¾å¿œï¼‰
4. Gemini API ã«ã‚ˆã‚‹é§è»Šå ´çœ‹æ¿ã®OCRè‡ªå‹•è§£æ
5. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ GPSä½ç½®è¿½è·¡
6. äºŒæ®µéšã‚¿ãƒƒãƒ—UIã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¹ã‚¿ãƒƒã‚¯åˆ¶é™ã¸ã®å¯¾å¿œ
7. æ¨™é«˜ãƒ»å‘¨è¾ºæ–½è¨­ãƒ»é§è»Šå ´ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚‹å¤šå±¤ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½¿ã„æ–¹**:
- æ–°è¦é–‹ç™ºæ™‚: ã‚»ã‚¯ã‚·ãƒ§ãƒ³1ï½3ã§ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç†è§£
- ç”»é¢å®Ÿè£…æ™‚: ã‚»ã‚¯ã‚·ãƒ§ãƒ³5ã§ç”»é¢è©³ç´°ã‚’å‚ç…§
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ™‚: ã‚»ã‚¯ã‚·ãƒ§ãƒ³8ã§ã‚¹ã‚­ãƒ¼ãƒã‚’å‚ç…§
- APIå®Ÿè£…æ™‚: ã‚»ã‚¯ã‚·ãƒ§ãƒ³6ã§ã‚µãƒ¼ãƒ“ã‚¹å±¤ã‚’å‚ç…§
- æ–™é‡‘è¨ˆç®—å®Ÿè£…æ™‚: ã‚»ã‚¯ã‚·ãƒ§ãƒ³10ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å‚ç…§

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’åŸºã«ã€å®Œå…¨ãªæ©Ÿèƒ½ã‚’æŒã¤ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†æ§‹ç¯‰å¯èƒ½ã§ã™ã€‚
