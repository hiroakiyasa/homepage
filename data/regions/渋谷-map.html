<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¸‹è°· - åœ°å›³</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
    #map { width: 100%; height: 100%; }

    .custom-marker {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 3px solid white;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .custom-marker:hover {
      transform: scale(1.2);
      z-index: 1000;
    }

    /* ã‚³ãƒ³ãƒ“ãƒ‹ãƒ­ã‚´ãƒãƒ¼ã‚«ãƒ¼ */
    .convenience-logo-marker {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: white;
      border: 2px solid #4caf50;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      padding: 4px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .convenience-logo-marker:hover {
      transform: scale(1.2);
      z-index: 1000;
    }

    .convenience-logo-marker img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .marker-center { background: #d32f2f; }
    .marker-parking { background: #1976d2; }
    .marker-toilet { background: #795548; }
    .marker-onsen { background: #f8bbd0; }
    .marker-restaurant { background: #ff9800; }

    .leaflet-popup-content { min-width: 200px; }
    .popup-title { font-weight: bold; font-size: 14px; margin-bottom: 6px; }
    .popup-info { font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // åœ°å›³åˆæœŸåŒ–
    const map = L.map('map').setView([35.65884476759946, 139.69949232004137], 15);

    // OpenStreetMap ã‚¿ã‚¤ãƒ«
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors',
      maxZoom: 19
    }).addTo(map);

    // ãƒãƒ¼ã‚«ãƒ¼ãƒ‡ãƒ¼ã‚¿
    const markers = [
    {
        "type": "center",
        "id": "area_center",
        "lat": 35.65884476759946,
        "lng": 139.69949232004137,
        "title": "æ¸‹è°·",
        "description": "å‘¨è¾ºã®ãŠã™ã™ã‚è»Šä¸­æ³Šã‚¹ãƒãƒƒãƒˆ",
        "color": "#d32f2f"
    },
    {
        "type": "parking",
        "id": "parking_0",
        "lat": 35.661615,
        "lng": 139.695351,
        "title": "ãƒ‘ãƒ¼ã‚¯ã‚¸ãƒ£ãƒ‘ãƒ³æ¾æ¶›ç¬¬ï¼’",
        "number": 1,
        "distance": "485m",
        "walking": "å¾’æ­©ç´„7åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "onsen",
        "id": "onsen_0_0",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_0_1",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_0_2",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.4km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_1",
        "lat": 35.658174,
        "lng": 139.696465,
        "title": "ã‚¨ã‚³ãƒ­ãƒ‘ãƒ¼ã‚¯ã€€é“ç„å‚å‚æœ¬ãƒ“ãƒ«é§è»Šå ´",
        "number": 2,
        "distance": "284m",
        "walking": "å¾’æ­©ç´„4åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_1_0",
        "lat": 35.658620592771,
        "lng": 139.69447884676,
        "title": "å††å±±å…ç«¥éŠåœ’ãƒˆã‚¤ãƒ¬",
        "distance": "186m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_1_0",
        "lat": 35.65731,
        "lng": 139.696228,
        "title": "æ¸‹è°·æ–‡åŒ–é€²åŒ–",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_1_1",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_1_2",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_2",
        "lat": 35.657482,
        "lng": 139.699265,
        "title": "ãƒ‘ãƒ¼ã‚¯ï¼˜ï¼–ã€€é“ç„å‚ç¬¬ï¼‘",
        "number": 3,
        "distance": "153m",
        "walking": "å¾’æ­©ç´„2åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_2_0",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…è¥¿å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "223m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_2_1",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…æ±å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "223m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_2_0",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_2_1",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_2_2",
        "lat": 35.65731,
        "lng": 139.696228,
        "title": "æ¸‹è°·æ–‡åŒ–é€²åŒ–",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_3",
        "lat": 35.659748,
        "lng": 139.695638,
        "title": "ãƒ‘ãƒ©ã‚«é“ç„å‚ç¬¬ï¼“",
        "number": 4,
        "distance": "363m",
        "walking": "å¾’æ­©ç´„5åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_3_0",
        "lat": 35.658620592771,
        "lng": 139.69447884676,
        "title": "å††å±±å…ç«¥éŠåœ’ãƒˆã‚¤ãƒ¬",
        "distance": "164m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_3_0",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_3_1",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_3_2",
        "lat": 35.65731,
        "lng": 139.696228,
        "title": "æ¸‹è°·æ–‡åŒ–é€²åŒ–",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_4",
        "lat": 35.656656,
        "lng": 139.697617,
        "title": "ã‚¿ã‚¤ãƒ ã‚ºé“ç„å‚é€š",
        "number": 5,
        "distance": "297m",
        "walking": "å¾’æ­©ç´„4åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "onsen",
        "id": "onsen_4_0",
        "lat": 35.65731,
        "lng": 139.696228,
        "title": "æ¸‹è°·æ–‡åŒ–é€²åŒ–",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_4_1",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_4_2",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_5",
        "lat": 35.656756,
        "lng": 139.699694,
        "title": "ã‚¿ã‚¤ãƒ ã‚ºæ¸‹è°·å®‡ç”°å·ç”º",
        "number": 6,
        "distance": "233m",
        "walking": "å¾’æ­©ç´„3åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_5_0",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…è¥¿å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "229m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_5_1",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…æ±å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "229m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_5_0",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_5_1",
        "lat": 35.65731,
        "lng": 139.696228,
        "title": "æ¸‹è°·æ–‡åŒ–é€²åŒ–",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_5_2",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_6",
        "lat": 35.660565,
        "lng": 139.697287,
        "title": "æ¸‹è°·ãƒ•ãƒ©ãƒƒã‚°",
        "number": 7,
        "distance": "277m",
        "walking": "å¾’æ­©ç´„4åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "onsen",
        "id": "onsen_6_0",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_6_1",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_6_2",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_7",
        "lat": 35.662473,
        "lng": 139.699901,
        "title": "ãƒã‚¤ãƒãƒ³ãƒ†ãƒ³ç¥å—é§è»Šå ´",
        "number": 8,
        "distance": "406m",
        "walking": "å¾’æ­©ç´„6åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_7_0",
        "lat": 35.66172918403,
        "lng": 139.70164511325,
        "title": "å®®ä¸‹å…¬åœ’ãƒˆã‚¤ãƒ¬",
        "distance": "178m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_7_1",
        "lat": 35.66418766814,
        "lng": 139.70205397998,
        "title": "ç¥å®®é€šå…¬åœ’ãƒˆã‚¤ãƒ¬",
        "distance": "273m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_7_2",
        "lat": 35.664913430254,
        "lng": 139.69932530776,
        "title": "åŒºå½¹æ‰€å‰å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "277m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_7_0",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_7_1",
        "lat": 35.659664,
        "lng": 139.701508,
        "title": "SAUNA PASSION ã‚µã‚¦ãƒŠãƒ‘ãƒƒã‚·ãƒ§ãƒ³",
        "distance": "0.3km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_7_2",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.4km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_8",
        "lat": 35.659082,
        "lng": 139.698951,
        "title": "ãƒˆãƒ©ã‚¹ãƒˆãƒ‘ãƒ¼ã‚¯æ¸‹æ±ã‚·ãƒã‚¿ãƒ¯ãƒ¼",
        "number": 9,
        "distance": "56m",
        "walking": "å¾’æ­©ç´„1åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_8_0",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…è¥¿å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "265m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_8_1",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…æ±å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "265m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_8_0",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_8_1",
        "lat": 35.659103,
        "lng": 139.697556,
        "title": "è¶³æ¹¯ã‚«ãƒ•ã‚§ ã‚‚ã¿ã®æ°—ãƒã‚¦ã‚¹ æ¸‹è°·é“ç„å‚åº—",
        "distance": "0.1km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_8_2",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "parking",
        "id": "parking_9",
        "lat": 35.6585,
        "lng": 139.702806,
        "title": "ã‚¿ã‚¤ãƒ ã‚ºæ¸‹è°·æ±æ­¦ãƒ›ãƒ†ãƒ«",
        "number": 10,
        "distance": "302m",
        "walking": "å¾’æ­©ç´„4åˆ†",
        "color": "#1976d2"
    },
    {
        "type": "toilet",
        "id": "toilet_9_0",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…è¥¿å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "117m",
        "color": "#795548"
    },
    {
        "type": "toilet",
        "id": "toilet_9_1",
        "lat": 35.658094592401,
        "lng": 139.70161376156,
        "title": "æ¸‹è°·é§…æ±å£å…¬è¡†ãƒˆã‚¤ãƒ¬",
        "distance": "117m",
        "color": "#795548"
    },
    {
        "type": "onsen",
        "id": "onsen_9_0",
        "lat": 35.659664,
        "lng": 139.701508,
        "title": "SAUNA PASSION ã‚µã‚¦ãƒŠãƒ‘ãƒƒã‚·ãƒ§ãƒ³",
        "distance": "0.2km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_9_1",
        "lat": 35.658783,
        "lng": 139.698532,
        "title": "ã‚ªãƒ¼ãƒ«ãƒ‰ãƒ«ãƒ¼ã‚­ãƒ¼ã‚µã‚¦ãƒŠ æ¸‹è°·å¿ çŠ¬ãƒãƒå…¬å£åº—",
        "distance": "0.4km",
        "color": "#f8bbd0"
    },
    {
        "type": "onsen",
        "id": "onsen_9_2",
        "lat": 35.660713,
        "lng": 139.69841,
        "title": "ã¦ã£ãºã‚“ã‚µã‚¦ãƒŠé“å ´",
        "distance": "0.5km",
        "color": "#f8bbd0"
    },
    {
        "type": "restaurant",
        "id": "restaurant_0",
        "lat": 35.662598494095825,
        "lng": 139.69735090108284,
        "title": "ç‚­ç«ç„¼ ã‚†ã†ã˜",
        "number": 1,
        "genre": "ãƒ›ãƒ«ãƒ¢ãƒ³",
        "address": "æ±äº¬éƒ½æ¸‹è°·åŒºå®‡ç”°å·ç”º11-1 æ¾æ²¼ãƒ“ãƒ«ã€€ï¼‘ï¼¦",
        "color": "#ff9800"
    },
    {
        "type": "restaurant",
        "id": "restaurant_1",
        "lat": 35.66088493790139,
        "lng": 139.69678548306598,
        "title": "VIRON æ¸‹è°·åº—",
        "number": 2,
        "genre": "ãƒ‘ãƒ³",
        "address": "æ±äº¬éƒ½æ¸‹è°·åŒºå®‡ç”°å·ç”º33-8 å¡šç”°ãƒ“ãƒ« 1F",
        "color": "#ff9800"
    },
    {
        "type": "restaurant",
        "id": "restaurant_2",
        "lat": 35.65906673790463,
        "lng": 139.70332678304302,
        "title": "ãƒ« ãƒ‘ãƒ³ ãƒ‰ã‚¥ ã‚¸ãƒ§ã‚¨ãƒ«ãƒ»ãƒ­ãƒ–ã‚·ãƒ§ãƒ³ æ¸‹è°·ãƒ’ã‚«ãƒªã‚¨ShinQsåº—",
        "number": 3,
        "genre": "ãƒ‘ãƒ³",
        "address": "æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·2-21-1 æ¸‹è°·ãƒ’ã‚«ãƒªã‚¨ B2F",
        "color": "#ff9800"
    },
    {
        "type": "restaurant",
        "id": "restaurant_3",
        "lat": 35.66011713790167,
        "lng": 139.69614198305865,
        "title": "ä¸­è¯å¯å°",
        "number": 4,
        "genre": "ä¸­è¯æ–™ç†",
        "address": "æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚2-23-13 æ¸‹è°·ãƒ‡ãƒªã‚¿ãƒ¯ãƒ¼ 2ï¼¦",
        "color": "#ff9800"
    },
    {
        "type": "restaurant",
        "id": "restaurant_4",
        "lat": 35.657333737904025,
        "lng": 139.69799148302923,
        "title": "ã¯ã‚„ã—",
        "number": 5,
        "genre": "ãƒ©ãƒ¼ãƒ¡ãƒ³",
        "address": "æ±äº¬éƒ½æ¸‹è°·åŒºé“ç„å‚1-14-9 ã‚½ã‚·ã‚¢ãƒ«é“ç„å‚ 1F",
        "color": "#ff9800"
    }
];

    // ãƒãƒ¼ã‚«ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜
    const markerObjects = {};

    // ã‚¢ã‚¤ã‚³ãƒ³å–å¾—é–¢æ•°
    function getMarkerIcon(type, number) {
      if (type === 'parking' && number) {
        return number;
      }
      if (type === 'restaurant' && number) {
        return number;
      }
      const icons = {
        center: 'ğŸ“',
        parking: 'ğŸ…¿ï¸',
        toilet: 'ğŸš»',
        onsen: 'â™¨ï¸',
        restaurant: 'ğŸ´'
      };
      return icons[type] || 'ğŸ“Œ';
    }

    // ãƒãƒ¼ã‚«ãƒ¼ã‚’ä½œæˆ
    markers.forEach(markerData => {
      let icon;
      let zIndexOffset = 0;

      // z-indexã®è¨­å®šï¼ˆé§è»Šå ´ã‚’æœ€å‰é¢ã«ï¼‰
      if (markerData.type === 'parking') {
        zIndexOffset = 1000;
      } else if (markerData.type === 'center') {
        zIndexOffset = 900;
      } else if (markerData.type === 'restaurant') {
        zIndexOffset = 800;
      } else if (markerData.type === 'convenience') {
        zIndexOffset = 700;
      } else if (markerData.type === 'toilet') {
        zIndexOffset = 600;
      } else if (markerData.type === 'onsen') {
        zIndexOffset = 500;
      }

      // ã‚³ãƒ³ãƒ“ãƒ‹ã®å ´åˆã¯ãƒ­ã‚´ç”»åƒã‚’ä½¿ç”¨ï¼ˆBase64åŸ‹ã‚è¾¼ã¿ï¼‰
      if (markerData.type === 'convenience' && markerData.logo) {
        icon = L.divIcon({
          className: 'custom-icon',
          html: `<div class="convenience-logo-marker"><img src="${markerData.logo}" alt="${markerData.subType}"></div>`,
          iconSize: [40, 40],
          iconAnchor: [20, 20]
        });
      } else {
        // ãã®ä»–ã®ãƒãƒ¼ã‚«ãƒ¼ã¯å¾“æ¥é€šã‚Š
        icon = L.divIcon({
          className: 'custom-icon',
          html: `<div class="custom-marker marker-${markerData.type}" style="background-color: ${markerData.color}">${getMarkerIcon(markerData.type, markerData.number)}</div>`,
          iconSize: [40, 40],
          iconAnchor: [20, 20]
        });
      }

      // ãƒãƒ¼ã‚«ãƒ¼ä½œæˆï¼ˆzIndexOffsetã‚’æŒ‡å®šï¼‰
      const marker = L.marker([markerData.lat, markerData.lng], {
        icon: icon,
        zIndexOffset: zIndexOffset
      }).addTo(map);

      // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…å®¹
      let popupContent = `<div class="popup-title">${markerData.title}</div>`;

      if (markerData.subType) {
        popupContent += `<div class="popup-info">ğŸª ${markerData.subType}</div>`;
      }
      if (markerData.description) {
        popupContent += `<div class="popup-info">${markerData.description}</div>`;
      }
      if (markerData.distance) {
        popupContent += `<div class="popup-info">ğŸ“ ${markerData.distance}</div>`;
      }
      if (markerData.walking) {
        popupContent += `<div class="popup-info">ğŸš¶ ${markerData.walking}</div>`;
      }
      if (markerData.genre) {
        popupContent += `<div class="popup-info">ğŸ½ï¸ ${markerData.genre}</div>`;
      }
      if (markerData.address) {
        popupContent += `<div class="popup-info" style="margin-top: 4px;">${markerData.address}</div>`;
      }

      marker.bindPopup(popupContent);

      // ãƒãƒ¼ã‚«ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜
      markerObjects[markerData.id] = marker;
    });

    // å¤–éƒ¨ã‹ã‚‰å‘¼ã³å‡ºã›ã‚‹é–¢æ•°
    window.showMarker = function(markerId) {
      const marker = markerObjects[markerId];
      if (marker) {
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§åœ°å›³ã‚’ç§»å‹•
        map.setView(marker.getLatLng(), 17, {
          animate: true,
          duration: 0.5
        });
        marker.openPopup();
      }
    };
  </script>
</body>
</html>